function i(e=256){return new f(e,1)}function e(e=256){return new f(e,6)}function r(e){return new a(e,31)}function o(r){if("string"!=typeof r)throw TypeError("expected string");var t=(r=unescape(encodeURIComponent(r)))["length"];let n=new Uint8Array(t);for(let e=0;e<t;e++)n[e]=r.charCodeAt(e);return n}function s(r){if("string"!=typeof r)throw TypeError("expected string");var e=r["length"];if(1&e)throw new TypeError("expected string of hex bytes");let t=0;r.startsWith("0x")&&(t+=2);var n=e-t>>1;let i=new Uint8Array(n);for(let e=0;e<n;e++){var s=parseInt(r.slice(t,t+=2),16);if(Number.isNaN(s))throw new TypeError("expected hex byte");i[e]=s}return i}function t(e){return[...e].map(e=>e.toString(16).padStart(2,"0")).join("")}class n{constructor(e,r){var t=1600;if(31&e)throw new Error("capacity % 32 != 0");if(e<0||t<=e)throw new Error("capacity must be [0,1600)");this.sponge=Array(50).fill(0),this.block_count=t-e>>5,this.block_index=0,this.suffix=r,this.ragged_block=0,this.ragged_shift=0}update(e){if(!(e instanceof Uint8Array))if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(Array.isArray(e))e=Uint8Array.from(e);else{if("string"!=typeof e)throw new TypeError("expected bytes");e=o(e)}let r=0;var t=e.length;if(0<this.ragged_shift&&(r=this._add_ragged(e,0),r==t))return this;let{sponge:n,block_index:i,block_count:s}=this;for(;r+4<=t;r+=4)n[i++]^=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24,i==s&&(h(n),i=0);return this.block_index=i,r<t&&this._add_ragged(e,r),this}_add_ragged(e,r){let{ragged_shift:t,ragged_block:n}=this,i=0;for(;r<e.length&&t<32;i++,r++,t+=8)n|=e[r]<<t;return 32==t&&(this._add_block(n),t=0,n=0),this.ragged_block=n,this.ragged_shift=t,i}_add_block(e){let{sponge:r,block_index:t,block_count:n}=this;r[t++]^=e,t==n&&(h(r),t=0),this.block_index=t}finalize(){let{sponge:e,suffix:r,ragged_shift:t,block_index:n,block_count:i}=this;if(t){if(-1==t)return this;r=this.ragged_block|r<<t}return e[n]^=r,e[i-1]^=2147483648,h(e),this.ragged_shift=-1,this}}class a extends n{constructor(e,r){super(e<<1,r),this.size0=e>>2,this.byte_offset=0}hex(e){return t(this.bytes(e))}bytes(e){this.finalize();var{sponge:r,byte_offset:t,block_count:n}=this,i=3&t,s=(0<i)+((e=e||this.size0)+3>>2);let o=new Int32Array(s),a=(t>>2)%n;for(let e=0;e<s;e++)o[e]=r[a++],a==n&&(h(r),a=0);return this.byte_offset=t+e,new Uint8Array(o.buffer,i,e)}}class f extends n{constructor(e,r){super(e<<1,r),this.size=e>>5}get hex(){return t(this.bytes)}get bytes(){this.finalize();var{size:r,sponge:t}=this;let n=new Int32Array(r);for(let e=0;e<r;e++)n[e]=t[e];return new Uint8Array(n.buffer)}}const Y=[1,0,32898,0,32906,-2147483648,-2147450880,-2147483648,32907,0,-2147483647,0,-2147450751,-2147483648,32777,-2147483648,138,0,136,0,-2147450871,0,-2147483638,0,-2147450741,0,139,-2147483648,32905,-2147483648,32771,-2147483648,32770,-2147483648,128,-2147483648,32778,0,-2147483638,-2147483648,-2147450751,-2147483648,32896,-2147483648,-2147483647,0,-2147450872,-2147483648];function h(r){for(let e=0;e<48;e+=2){var t=r[0]^r[10]^r[20]^r[30]^r[40],n=r[1]^r[11]^r[21]^r[31]^r[41],i=r[2]^r[12]^r[22]^r[32]^r[42],s=r[3]^r[13]^r[23]^r[33]^r[43],o=r[4]^r[14]^r[24]^r[34]^r[44],a=r[5]^r[15]^r[25]^r[35]^r[45],f=r[6]^r[16]^r[26]^r[36]^r[46],h=r[7]^r[17]^r[27]^r[37]^r[47],l=r[8]^r[18]^r[28]^r[38]^r[48],u=r[9]^r[19]^r[29]^r[39]^r[49],c=l^(i<<1|s>>>31),d=u^(s<<1|i>>>31);r[0]^=c,r[1]^=d,r[10]^=c,r[11]^=d,r[20]^=c,r[21]^=d,r[30]^=c,r[31]^=d,r[40]^=c,r[41]^=d,d=n^(a<<1|o>>>31),r[2]^=c=t^(o<<1|a>>>31),r[3]^=d,r[12]^=c,r[13]^=d,r[22]^=c,r[23]^=d,r[32]^=c,r[33]^=d,r[42]^=c,r[43]^=d,d=s^(h<<1|f>>>31),r[4]^=c=i^(f<<1|h>>>31),r[5]^=d,r[14]^=c,r[15]^=d,r[24]^=c,r[25]^=d,r[34]^=c,r[35]^=d,r[44]^=c,r[45]^=d,d=a^(u<<1|l>>>31),r[6]^=c=o^(l<<1|u>>>31),r[7]^=d,r[16]^=c,r[17]^=d,r[26]^=c,r[27]^=d,r[36]^=c,r[37]^=d,r[46]^=c,r[47]^=d,d=h^(n<<1|t>>>31),r[8]^=c=f^(t<<1|n>>>31),r[9]^=d,r[18]^=c,r[19]^=d,r[28]^=c,r[29]^=d,r[38]^=c,r[39]^=d,r[48]^=c,r[49]^=d;var g=r[0],y=r[1],p=r[11]<<4|r[10]>>>28,w=r[10]<<4|r[11]>>>28,b=r[20]<<3|r[21]>>>29,v=r[21]<<3|r[20]>>>29,m=r[31]<<9|r[30]>>>23,_=r[30]<<9|r[31]>>>23,x=r[40]<<18|r[41]>>>14,A=r[41]<<18|r[40]>>>14,E=r[2]<<1|r[3]>>>31,k=r[3]<<1|r[2]>>>31,U=r[13]<<12|r[12]>>>20,T=r[12]<<12|r[13]>>>20,I=r[22]<<10|r[23]>>>22,L=r[23]<<10|r[22]>>>22,j=r[33]<<13|r[32]>>>19,z=r[32]<<13|r[33]>>>19,S=r[42]<<2|r[43]>>>30,B=r[43]<<2|r[42]>>>30,N=r[5]<<30|r[4]>>>2,C=r[4]<<30|r[5]>>>2,R=r[14]<<6|r[15]>>>26,O=r[15]<<6|r[14]>>>26,M=r[25]<<11|r[24]>>>21,P=r[24]<<11|r[25]>>>21,J=r[34]<<15|r[35]>>>17,W=r[35]<<15|r[34]>>>17,D=r[45]<<29|r[44]>>>3,V=r[44]<<29|r[45]>>>3,$=r[6]<<28|r[7]>>>4,q=r[7]<<28|r[6]>>>4,F=r[17]<<23|r[16]>>>9,G=r[16]<<23|r[17]>>>9,H=r[26]<<25|r[27]>>>7,K=r[27]<<25|r[26]>>>7,Q=r[36]<<21|r[37]>>>11,X=r[37]<<21|r[36]>>>11,s=r[47]<<24|r[46]>>>8,i=r[46]<<24|r[47]>>>8,a=r[8]<<27|r[9]>>>5,o=r[9]<<27|r[8]>>>5,l=r[18]<<20|r[19]>>>12,u=r[19]<<20|r[18]>>>12,h=r[29]<<7|r[28]>>>25,f=r[28]<<7|r[29]>>>25,t=r[38]<<8|r[39]>>>24,n=r[39]<<8|r[38]>>>24,c=r[48]<<14|r[49]>>>18,d=r[49]<<14|r[48]>>>18;r[0]=g^~U&M,r[1]=y^~T&P,r[10]=$^~l&b,r[11]=q^~u&v,r[20]=E^~R&H,r[21]=k^~O&K,r[30]=a^~p&I,r[31]=o^~w&L,r[40]=N^~F&h,r[41]=C^~G&f,r[2]=U^~M&Q,r[3]=T^~P&X,r[12]=l^~b&j,r[13]=u^~v&z,r[22]=R^~H&t,r[23]=O^~K&n,r[32]=p^~I&J,r[33]=w^~L&W,r[42]=F^~h&m,r[43]=G^~f&_,r[4]=M^~Q&c,r[5]=P^~X&d,r[14]=b^~j&D,r[15]=v^~z&V,r[24]=H^~t&x,r[25]=K^~n&A,r[34]=I^~J&s,r[35]=L^~W&i,r[44]=h^~m&S,r[45]=f^~_&B,r[6]=Q^~c&g,r[7]=X^~d&y,r[16]=j^~D&$,r[17]=z^~V&q,r[26]=t^~x&E,r[27]=n^~A&k,r[36]=J^~s&a,r[37]=W^~i&o,r[46]=m^~S&N,r[47]=_^~B&C,r[8]=c^~g&U,r[9]=d^~y&T,r[18]=D^~$&l,r[19]=V^~q&u,r[28]=x^~E&R,r[29]=A^~k&O,r[38]=s^~a&p,r[39]=i^~o&w,r[48]=S^~N&F,r[49]=B^~C&G,r[0]^=Y[e],r[1]^=Y[e+1]}}function l(r){if("string"==typeof r){if(/^(0x)?[a-f0-9]{0,12}$/i.test(r))return parseInt(r,16);r=s(r)}else if(Array.isArray(r))r=Uint8Array.from(r);else if(ArrayBuffer.isView(r))r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);else{if(!(r instanceof ArrayBuffer))throw new TypeError("unknown number to byte conversion");r=new Uint8Array(r,0,r.byteLength)}if(7<r.length){var t=r.length-7;for(let e=0;e<t;e++)if(0<r[e])throw new RangeError("overflow");r=r.subarray(t)}let e=0;for(var n of r)e=256*e+n;return e}class u{static from_hex(e){return new this(s(e))}constructor(e){this.buf=e,this.pos=0}get remaining(){return this.buf.length-this.pos}read(e){let{pos:r,buf:t}=this;var n=r+e;if(n>t.length)throw new Error("overflow");e=t.subarray(r,n);return this.pos=n,e}number(e=32){return l(this.read(e))}string(){var e=(n=this.number())+32;let r=this["buf"];if(e>r.length)throw new RangeError("overflow");var t=l(r.subarray(n,e)),n=e;if((e+=t)>r.length)throw new RangeError("overflow");return String.fromCharCode.apply(null,r.subarray(n,e))}addr(e=!0){if(0!=this.number(12))throw new TypeError("expected zero");var r=this.read(20);let n=t(r);if(e){let t=i().update(r).hex;n=[...n].map((e,r)=>56<=t[r].charCodeAt(0)?e.toUpperCase():e).join("")}return"0x"+n}}function c(n,r){if("number"==typeof r){if(!Number.isSafeInteger(r))throw new RangeError("overflow");for(let e=n.length-1;r&&0<=e;e--)n[e]=r,r=Math.floor(r/256)}else{if(!(r instanceof BigInt))throw new TypeError("unknown integer: "+r);{let t=r.toString(16);var i=t["length"];for(let e=n.length-1,r=i;0<=e&&0<r;e--,r-=2)n[e]=parseInt(t.slice(Math.max(0,r-2),r),16)}}}class d{constructor(e=256){if(!Number.isSafeInteger(e)||e<1)throw new TypeError("expected positive initial capacity");this.buf=new Uint8Array(e),this.pos=0,this.tails=[]}reset(){return this.buf.fill(0),this.tails.length=0,this.pos=0,this}get hex_encoded(){return"0x"+t(this.encoded)}get encoded(){let{pos:r,tails:t}=this;var n=t.reduce((e,[,r])=>r.length,0);if(0<n){this.alloc(n);let e=this["buf"];for(var[i,s]of t)c(e.subarray(i,i+32),r),e.set(s,r),r+=s.length}return this.buf.subarray(0,r)}alloc(r){if("number"!=typeof r||r<1)throw new TypeError("expected positive size");let{buf:t,pos:e}=this;var n=e+r;if(n>t.length){let e=new Uint8Array(Math.max(t.length+r,t.length<<1));e.set(t),this.buf=t=e}return this.pos=n,t.subarray(e,n)}number(e,r=32){return c(this.alloc(r),e),this}string(e){if("string"!=typeof e)throw new TypeError("expcted string");var r=this["pos"];this.alloc(32);e=o(e);let t=new Uint8Array(e.length+63&-32);return c(t.subarray(0,32),e.length),t.set(e,32),this.tails.push([r,t]),this}bytes(e){if(!(e instanceof Uint8Array))if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(Array.isArray(e))e=Uint8Array.from(e);else{if("string"!=typeof e)throw new TypeError("expected bytes");e=o(e)}return this.alloc(e.length).set(e),this}addr(e){e=s(e);if(20!=e.length)throw new TypeError("expected address");return this.alloc(32).set(e,12),this}}function g(h){let l,u,c;return async n=>{if(void 0===l){var e,i=l=[];let t=new WebSocket(h),n,r;try{await new Promise((e,r)=>{n=setTimeout(()=>r(new Error("Timeout")),1e4),t.addEventListener("close",r),t.addEventListener("error",r),t.addEventListener("open",e,{once:!0})})}catch(e){l=void 0,t.removeEventListener("open",r);for(var{rej:s}of i)s(e);throw t.close(),e}finally{clearTimeout(n)}t.removeEventListener("error",r),t.removeEventListener("close",r),l=t,u=0,c={};for({ful:e}of i)e();function o(e){if(t===l){l=void 0;for(var{rej:r}of Object.values(c))r(e);c=void 0}}t.addEventListener("message",({data:r})=>{var t=JSON.parse(r);let n=c[t.id];if(n){delete c[t.id],clearTimeout(n.timer);var{result:r,error:t}=t;if(r)return n.ful(r);let e=new Error(t?.message??"Unknown Error");"code"in t&&(e.code=t.code),n.rej(e)}}),t.addEventListener("close",e=>o(Error("Unexpected close"))),t.addEventListener("error",o)}else Array.isArray(l)&&await new Promimse((e,r)=>{l.push({ful:e,rej:r})});let a=++u,f=c;return new Promise((e,r)=>{var t=setTimeout(()=>{delete f[a],r(new Error("Timeout"))},5e3);c[a]={timer:t,ful:e,rej:r},l.send(JSON.stringify({jsonrpc:"2.0",id:a,...n}))})}}export{u as ABIDecoder,d as ABIEncoder,s as bytes_from_hex,o as bytes_from_str,t as hex_from_bytes,i as keccak,l as number_from_abi,e as sha3,r as shake,g as smol_provider};