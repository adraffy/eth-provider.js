function e(e=256){return new c(e,1)}function t(e=256){return new c(e,6)}function r(e){return new h(e,31)}function s(e){return[...e].map((e=>e.toString(16).padStart(2,"0"))).join("")}function i(e){if("string"!=typeof e)throw TypeError("expected string");e.startsWith("0x")&&(e=e.slice(2)),1&e.length&&(e=`0${e}`);let t=e.length>>1,r=new Uint8Array(t);for(let s=0,i=0;s<t;s++){let t=parseInt(e.slice(i,i+=2),16);if(Number.isNaN(t))throw new TypeError("expected hex byte");r[s]=t}return r}function n(e){if("string"!=typeof e)throw TypeError("expected string");try{e=unescape(encodeURIComponent(e))}catch(e){throw new Error("malformed utf8",{cause:e})}let{length:t}=e,r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e.charCodeAt(s);return r}function o(e){try{return decodeURIComponent(escape(String.fromCharCode(...e)))}catch(e){throw new Error("malformed utf8",{cause:e})}}class a{constructor(e,t){const r=1600;if(31&e)throw new Error("capacity % 32 != 0");if(e<0||e>=r)throw new Error("capacity must be [0,1600)");this.sponge=Array(50).fill(0),this.block_count=r-e>>5,this.block_index=0,this.suffix=t,this.ragged_block=0,this.ragged_shift=0}update(e){if(!(e instanceof Uint8Array))if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(Array.isArray(e))e=Uint8Array.from(e);else{if("string"!=typeof e)throw new TypeError("expected bytes");e=n(e)}let t=0,r=e.length;if(this.ragged_shift>0&&(t=this._add_ragged(e,0),t==r))return this;let{sponge:s,block_index:i,block_count:o}=this;for(;t+4<=r;t+=4)s[i++]^=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,i==o&&(l(s),i=0);return this.block_index=i,t<r&&this._add_ragged(e,t),this}_add_ragged(e,t){let{ragged_shift:r,ragged_block:s}=this,i=0;for(;t<e.length&&r<32;i++,t++,r+=8)s|=e[t]<<r;return 32==r&&(this._add_block(s),r=0,s=0),this.ragged_block=s,this.ragged_shift=r,i}_add_block(e){let{sponge:t,block_index:r,block_count:s}=this;t[r++]^=e,r==s&&(l(t),r=0),this.block_index=r}finalize(){let{sponge:e,suffix:t,ragged_shift:r,block_index:s,block_count:i}=this;if(r){if(-1==r)return;t=this.ragged_block|t<<r}e[s]^=t,e[i-1]^=2147483648,l(e),this.ragged_shift=-1}}class h extends a{constructor(e,t){super(e<<1,t),this.size0=e>>2,this.byte_offset=0}hex(e){return s(this.bytes(e))}bytes(e){this.finalize(),e||(e=this.size0);let{sponge:t,byte_offset:r,block_count:s}=this,i=3&r,n=(i>0)+(e+3>>2),o=new Int32Array(n),a=(r>>2)%s;for(let e=0;e<n;e++)o[e]=t[a++],a==s&&(l(t),a=0);return this.byte_offset=r+e,new Uint8Array(o.buffer,i,e)}}class c extends a{constructor(e,t){super(e<<1,t),this.size=e>>5}get hex(){return s(this.bytes)}get bytes(){this.finalize();let{size:e,sponge:t}=this,r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=t[s];return new Uint8Array(r.buffer)}}const u=[1,0,32898,0,32906,-2147483648,-2147450880,-2147483648,32907,0,-2147483647,0,-2147450751,-2147483648,32777,-2147483648,138,0,136,0,-2147450871,0,-2147483638,0,-2147450741,0,139,-2147483648,32905,-2147483648,32771,-2147483648,32770,-2147483648,128,-2147483648,32778,0,-2147483638,-2147483648,-2147450751,-2147483648,32896,-2147483648,-2147483647,0,-2147450872,-2147483648];function l(e){for(let t=0;t<48;t+=2){let r=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],n=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],h=e[6]^e[16]^e[26]^e[36]^e[46],c=e[7]^e[17]^e[27]^e[37]^e[47],l=e[8]^e[18]^e[28]^e[38]^e[48],d=e[9]^e[19]^e[29]^e[39]^e[49],f=l^(i<<1|n>>>31),_=d^(n<<1|i>>>31);e[0]^=f,e[1]^=_,e[10]^=f,e[11]^=_,e[20]^=f,e[21]^=_,e[30]^=f,e[31]^=_,e[40]^=f,e[41]^=_,f=r^(o<<1|a>>>31),_=s^(a<<1|o>>>31),e[2]^=f,e[3]^=_,e[12]^=f,e[13]^=_,e[22]^=f,e[23]^=_,e[32]^=f,e[33]^=_,e[42]^=f,e[43]^=_,f=i^(h<<1|c>>>31),_=n^(c<<1|h>>>31),e[4]^=f,e[5]^=_,e[14]^=f,e[15]^=_,e[24]^=f,e[25]^=_,e[34]^=f,e[35]^=_,e[44]^=f,e[45]^=_,f=o^(l<<1|d>>>31),_=a^(d<<1|l>>>31),e[6]^=f,e[7]^=_,e[16]^=f,e[17]^=_,e[26]^=f,e[27]^=_,e[36]^=f,e[37]^=_,e[46]^=f,e[47]^=_,f=h^(r<<1|s>>>31),_=c^(s<<1|r>>>31),e[8]^=f,e[9]^=_,e[18]^=f,e[19]^=_,e[28]^=f,e[29]^=_,e[38]^=f,e[39]^=_,e[48]^=f,e[49]^=_;let p=e[0],y=e[1],w=e[11]<<4|e[10]>>>28,m=e[10]<<4|e[11]>>>28,E=e[20]<<3|e[21]>>>29,b=e[21]<<3|e[20]>>>29,g=e[31]<<9|e[30]>>>23,C=e[30]<<9|e[31]>>>23,T=e[40]<<18|e[41]>>>14,v=e[41]<<18|e[40]>>>14,A=e[2]<<1|e[3]>>>31,S=e[3]<<1|e[2]>>>31,O=e[13]<<12|e[12]>>>20,N=e[12]<<12|e[13]>>>20,R=e[22]<<10|e[23]>>>22,I=e[23]<<10|e[22]>>>22,B=e[33]<<13|e[32]>>>19,L=e[32]<<13|e[33]>>>19,x=e[42]<<2|e[43]>>>30,P=e[43]<<2|e[42]>>>30,X=e[5]<<30|e[4]>>>2,D=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,U=e[15]<<6|e[14]>>>26,k=e[25]<<11|e[24]>>>21,H=e[24]<<11|e[25]>>>21,$=e[34]<<15|e[35]>>>17,V=e[35]<<15|e[34]>>>17,G=e[45]<<29|e[44]>>>3,F=e[44]<<29|e[45]>>>3,K=e[6]<<28|e[7]>>>4,q=e[7]<<28|e[6]>>>4,Y=e[17]<<23|e[16]>>>9,Z=e[16]<<23|e[17]>>>9,W=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,z=e[36]<<21|e[37]>>>11,Q=e[37]<<21|e[36]>>>11,J=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,te=e[8]<<27|e[9]>>>5,re=e[9]<<27|e[8]>>>5,se=e[18]<<20|e[19]>>>12,ie=e[19]<<20|e[18]>>>12,ne=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,ae=e[38]<<8|e[39]>>>24,he=e[39]<<8|e[38]>>>24,ce=e[48]<<14|e[49]>>>18,ue=e[49]<<14|e[48]>>>18;e[0]=p^~O&k,e[1]=y^~N&H,e[10]=K^~se&E,e[11]=q^~ie&b,e[20]=A^~M&W,e[21]=S^~U&j,e[30]=te^~w&R,e[31]=re^~m&I,e[40]=X^~Y&ne,e[41]=D^~Z&oe,e[2]=O^~k&z,e[3]=N^~H&Q,e[12]=se^~E&B,e[13]=ie^~b&L,e[22]=M^~W&ae,e[23]=U^~j&he,e[32]=w^~R&$,e[33]=m^~I&V,e[42]=Y^~ne&g,e[43]=Z^~oe&C,e[4]=k^~z&ce,e[5]=H^~Q&ue,e[14]=E^~B&G,e[15]=b^~L&F,e[24]=W^~ae&T,e[25]=j^~he&v,e[34]=R^~$&J,e[35]=I^~V&ee,e[44]=ne^~g&x,e[45]=oe^~C&P,e[6]=z^~ce&p,e[7]=Q^~ue&y,e[16]=B^~G&K,e[17]=L^~F&q,e[26]=ae^~T&A,e[27]=he^~v&S,e[36]=$^~J&te,e[37]=V^~ee&re,e[46]=g^~x&X,e[47]=C^~P&D,e[8]=ce^~p&O,e[9]=ue^~y&N,e[18]=G^~K&se,e[19]=F^~q&ie,e[28]=T^~A&M,e[29]=v^~S&U,e[38]=J^~te&w,e[39]=ee^~re&m,e[48]=x^~X&Y,e[49]=P^~D&Z,e[0]^=u[t],e[1]^=u[t+1]}}function d(e,t){let r=e.length,s=r-t.length;for(let i=0;0==s&&i<r;i++)s=e[i]-t[i];return s}function f(e,t,r){return e[t]=r,r.then((r=>(e[t]=r,r))).catch((r=>{throw delete e[t],r}))}function _(e){return"data:application/json;base64,"+btoa(JSON.stringify(e))}function p(e){return/^(0x)?[0]+$/i.test(e)}function y(e){return e.replace(/^ipfs:\/\//i,"https://dweb.link/ipfs/")}const w="0x0000000000000000000000000000000000000000";function m(t,r=!0){if("string"!=typeof t)throw new TypeError("expected string");t.startsWith("0x")&&(t=t.slice(2));let s=t.toLowerCase();if(!/^[a-f0-9]{40}$/.test(s))throw new TypeError("expected 40-char hex");let i=s;if(r&&!/^[0-9]+$/.test(i)){let r=e().update(s).hex;if(i=[...s].map(((e,t)=>r.charCodeAt(t)>=56?e.toUpperCase():e)).join(""),t!==i&&t!==s&&t!==s.toLowerCase())throw new Error(`checksum failed: ${t}`)}return`0x${i}`}function E(e){return/^(0x)?[a-f0-9]{40}$/i.test(e)}function b(e){try{return m(e)===e}catch(e){}}function g(e){return(e=m(e)).slice(0,6)+".."+e.slice(-4)}function C(e){let t=e<0?~e:255-e;if(t<0||t>=256)throw new TypeError(`invalid bit index: ${e}`);return[t>>3,128>>(7&t)]}class T{static wrap(e){if(e instanceof T)return e;if(e instanceof Uint8Array)return new this(S(e,32,!1));if(Number.isSafeInteger(e))return this.from_number(e);if("string"==typeof e)return this.from_str(e);throw new TypeError(`not Uint256-like: ${e}`)}static zero(){return new this(new Uint8Array(32))}static from_number(e){return this.zero().set_number(e)}static from_bytes(e){return new this(S(e,32))}static from_str(e){return e.startsWith("0x")?this.from_hex(e):this.from_dec(e)}static from_hex(e){return this.from_bytes(i(e))}static from_dec(e){if(!/^[0-9]+$/.test(e))throw new TypeError(`expected decimal digits: ${e}`);let t=e.length;t<10&&this.from_number(parseInt(e,10));let r=new Uint8Array(Math.max(32,t)),s=0;for(let i=0;i<t;i++){let t=e.charCodeAt(i)-48;for(let e=0;e<s;e++)t+=10*r[e],r[e]=t,t>>=8;for(;t>0;)r[s++]=t,t>>=8}for(let e=Math.min(s,15);e>=0;e--){let t=31-e,s=r[e];r[e]=r[t],r[t]=s}return new this(r.slice(0,32))}constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("expected bytes");if(32!=e.length)throw new TypeError("expected 32 bytes");this.bytes=e}clone(){return new this.constructor(this.bytes.slice())}compare(e){return d(this.bytes,this.constructor.wrap(e).bytes)}set_number(e){return A(this.bytes,e),this}add(e){let t=this.constructor.wrap(e).bytes,{bytes:r}=this,s=0;for(let e=31;e>=0;e--){let i=r[e]+t[e]+s;r[e]=i,s=i>>8}return this}apply_bytewise_binary_op(e,t){let r=this.constructor.wrap(t).bytes;return this.bytes.forEach(((t,s,i)=>i[s]=e(t,r[s]))),this}bytewise_fill(e){return this.bytes.fill(e),this}or(e){return this.apply_bytewise_binary_op(((e,t)=>e|t),e)}and(e){return this.apply_bytewise_binary_op(((e,t)=>e&t),e)}xor(e){return this.apply_bytewise_binary_op(((e,t)=>e^t),e)}not(){return this.bytes.forEach(((e,t,r)=>r[t]=~e)),this}set_bit(e,t=!0){let[r,s]=C(e);return t?this.bytes[r]|=s:this.bytes[r]&=~s,this}flip_bit(e){let[t,r]=C(e);return this.bytes[t]^=r,this}test_bit(e){let[t,r]=C(e);return(this.bytes[t]&r)>0}get number(){let{bytes:e}=this;return 255==e[0]?-(1+v(e.map((e=>~e)))):v(e)}get unsigned(){return v(this.bytes)}get hex(){return"0x"+s(this.bytes)}get min_hex(){return"0x"+this.digit_str(16)}get bin(){return"0b"+this.digit_str(2)}get dec(){return this.digit_str(10)}digit_str(e,t="0123456789abcdefghjiklmnopqrstuvwxyz"){if(e>t.length)throw new RangeError(`radix larger than lookup: ${x}`);return this.digits(e).map((e=>t[e])).join("")}digits(e){if(e<2)throw new RangeError(`radix must be 2 or more: ${e}`);let t=[0];for(let r of this.bytes){for(let s=0;s<t.length;++s){let i=t[s]<<8|r;t[s]=i%e,r=i/e|0}for(;r>0;)t.push(r%e),r=r/e|0}return t.reverse()}toJSON(){return this.min_hex}toString(){return`Uint256(${this.min_hex})`}}function v(e){if(e.length>7){let t=e.length-7;for(let r=0;r<t;r++)if(e[r]>0)throw new RangeError("overflow");e=e.subarray(t)}let t=0;for(let r of e)t=256*t+r;if(!Number.isSafeInteger(t))throw new RangeError("overflow");return t}function A(e,t){if(!Number.isSafeInteger(t))throw new RangeError(`expected integer: ${t}`);if(t<0){t=-(t+1);for(let r=e.length-1;r>=0;r--)e[r]=~(255&t),t=Math.floor(t/256)}else for(let r=e.length-1;r>=0;r--)e[r]=255&t,t=Math.floor(t/256)}function S(e,t,r=!0){let{length:s}=e;if(s==t)return r?e.slice():e;if(s>t)return e.slice(t-s);let i=new Uint8Array(t);return i.set(e,t-s),i}class O{static from_hex(e){return new this(i(e))}constructor(e){this.buf=e,this.pos=0}get remaining(){return this.buf.length-this.pos}read_bytes(e){let{pos:t,buf:r}=this,s=t+e;if(s>r.length)throw new RangeError("buffer overflow");let i=r.subarray(t,s);return this.pos=s,i}read_memory(){let e=this.number(),t=e+32,{buf:r}=this;if(t>r.length)throw new RangeError("buffer overflow");let s=v(r.subarray(e,t));if(e=t,t+=s,t>r.length)throw new RangeError("buffer overflow");return r.subarray(e,t)}peek_byte(e=0){let{pos:t,buf:r}=this;if(t+=e,!(t>=0&&t<r.length))throw new RangeError(`invalid offset: ${e}`);return r[t]}read_byte(){let{pos:e,buf:t}=this;if(e>=t.length)throw new RangeError("buffer overflow");return this.pos=e+1,t[e]}read_addr_bytes(){if(this.read_bytes(12).some((e=>e>0)))throw new TypeError("invalid address: expected zero");return this.read_bytes(20)}bytes(e){return this.read_bytes(e).slice()}boolean(){return this.number()>0}number(e=32){return v(this.read_bytes(e))}uint256(){return new T(this.bytes(32))}string(){return o(this.read_memory())}memory(){return this.read_memory().slice()}addr(e=!0){let t=s(this.read_addr_bytes());return e?m(t):`0x${t}`}uvarint(){let e=0,t=1;for(;;){let r=this.read_byte();if(e+=(127&r)*t,r<=127)break;if(t>70368744177664)throw new RangeException("overflow");t*=128}return e}}const N={};function R(e){return/^0x[0-9a-fA-F]{8}$/.test(e)?e:s(I(e))}function I(t){if("string"==typeof t&&t.includes("(")){let r=N[t];return r||(N[t]=r=e().update(t).bytes.subarray(0,4)),r.slice()}try{let e=t instanceof Uint8Array?t:i(t);if(4!=e.length)throw new Error("expected 4 bytes");return e}catch(e){throw new Error(`method ${t} should be a signature or 8-char hex`)}}class B{static method(e){return new B(4).add_bytes(I(e))}constructor(e=0,t=256){if(!Number.isSafeInteger(t)||t<1)throw new TypeError("expected positive initial capacity");this.buf=new Uint8Array(t),this.pos=0,this.offset=e,this.tails=[]}reset(){return this.buf.fill(0),this.tails.length=0,this.pos=0,this}build_hex(){return"0x"+s(this.build())}build(){let{pos:e,tails:t,offset:r}=this,s=t.reduce(((e,[t,r])=>r.length),0);if(s>0){this.alloc(s);let{buf:i}=this;for(let[s,n]of t)A(i.subarray(s,s+32),e-r),i.set(n,e),e+=n.length}return this.buf.subarray(0,e)}alloc(e){if(!Number.isSafeInteger(e)||e<1)throw new TypeError("expected positive size");let{buf:t,pos:r}=this,s=r+e;if(s>t.length){let r=new Uint8Array(Math.max(t.length+e,t.length<<1));r.set(t),this.buf=t=r}return this.pos=s,t.subarray(r,s)}bytes_hex(e){return this.bytes(i(e))}bytes(e){return this.alloc(e.length+31&-32).set(e),this}number(e,t=32){if(e instanceof T){let r=this.alloc(t);t<32?r.set(e.bytes.subarray(32-t)):r.set(e.bytes,t-32)}else A(this.alloc(t),e);return this}string(e){return this.memory(n(e))}memory(e){let{pos:t}=this;this.alloc(32);let r=new Uint8Array(e.length+63&-32);return A(r.subarray(0,32),e.length),r.set(e,32),this.tails.push([t,r]),this}addr(e){let t=i(e);if(20!=t.length)throw new TypeError("expected address");return this.alloc(32).set(t,12),this}add_hex(e){return this.add_bytes(i(e))}add_bytes(e){if(!(e instanceof Uint8Array))if(e instanceof ArrayBuffer)e=new Uint8Array(e);else{if(!Array.isArray(e))throw new TypeError("expected bytes");e=Uint8Array.from(e)}return this.alloc(e.length).set(e),this}}class L{constructor(e){let t=[...e];if(t.length!==e.length)throw new TypeError("expected UTF16");this.lookup=e,this.map=Object.fromEntries(t.map(((e,t)=>[e,t])))}parse(e){let t=this.map[e];if(void 0===t)throw new TypeError(`invalid digit ${e}`);return t}}class P extends L{bytes_from_str(e){let{lookup:t}=this,r=t.length,s=e.length,i=new Uint8Array(s),n=0;for(let t of e){let e=this.parse(t);for(let t=0;t<n;t++)e+=i[t]*r,i[t]=e,e>>=8;for(;e>0;)i[n++]=e,e>>=8}for(let r=0;r<s&&e[r]===t[0];r++)n++;return i.subarray(0,n).reverse()}str_from_bytes(e){let t=this.lookup.length,r=[];for(let s of e){for(let e=0;e<r.length;++e){let i=r[e]<<8|s;r[e]=i%t,s=i/t|0}for(;s>0;)r.push(s%t),s=s/t|0}for(let t=0;t<e.length&&0==e[t];t++)r.push(0);return r.reverse().map((e=>this.lookup[e])).join("")}}class X extends L{constructor(e,t){super(e),this.w=t}bytes_from_str(e,t){let{w:r}=this,s=e.length,i=0,n=0,o=0;for(;t&&s>0&&"="==e[s-1];)--s;let a=new Uint8Array(s*r>>3);for(let t=0;t<s;t++)n=n<<r|this.parse(e[t]),o+=r,o>=8&&(a[i++]=n>>(o-=8)&255);if(n<<8-o&255)throw new Error("wtf");return a}str_from_bytes(e,t){let{w:r,lookup:s}=this,i=(1<<r)-1,n=0,o=0,a="",h=e.length;for(let t=0;t<h;t++)for(n=n<<8|e[t],o+=8;o>=r;)a+=s[n>>(o-=r)&i];for(o&&(a+=s[n<<r-o&i]);t&&a.length*r&7;)a+="=";return a}}const D="abcdefghijklmnopqrstuvwxyz",M="0123456789"+D,U=new X(D.toUpperCase()+D+M.slice(0,10)+"+=",6),k=new X(D.toUpperCase()+D+M.slice(0,10)+"-_",6),H=new P("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),$=new P(M),V=new X(M.slice(0,32),5),G=new X("abcdefghijklmnopqrstuvwxyz234567",5),F=new X(M.slice(0,16),4),K=new P(M.slice(0,10)),q=new X(M.slice(0,8),3),Y=new X(M.slice(0,2),1);function Z(e,...t){return{decode:r=>e.bytes_from_str(r,...t),encode:r=>e.str_from_bytes(r,...t)}}const W={0:{...Z(Y),name:"base2"},7:{...Z(q),name:"base8"},9:{...Z(K),name:"base10"},f:{...Z(F),case:!1,name:"base16"},F:{...Z(F),case:!0,name:"base16upper"},v:{...Z(V),case:!1,name:"base32hex"},V:{...Z(V),case:!0,name:"base32hexupper"},t:{...Z(V,!0),case:!1,name:"base32hexpad"},T:{...Z(V,!0),case:!0,name:"base32hexpadupper"},b:{...Z(G),case:!1,name:"base32"},B:{...Z(G),case:!0,name:"base32upper"},c:{...Z(G,!0),case:!1,name:"base32pad"},C:{...Z(G,!0),case:!0,name:"base32padupper"},k:{...Z($),case:!1,name:"base36"},K:{...Z($),case:!0,name:"base36upper"},z:{...Z(H),name:"base58btc"},m:{...Z(U),name:"base64"},M:{...Z(U,!0),name:"base64pad"},u:{...Z(k),name:"base64url"},U:{...Z(k,!0),name:"base64urlpad"},1:{...Z(H),name:"base58btc-Identity"},Q:{...Z(H),name:"base58btc-CIDv0"}};for(let[e,t]of Object.entries(W))t.prefix=e,W[t.name]=t;function j(e,t){if("string"!=typeof e)throw new TypeError("expected string");t||(t=e[0],e=e.slice(1));let r=W[t];if(!r)throw new Error(`Unknown multihash: ${t}`);return void 0!==r.case&&(e=e.toLowerCase()),r.decode(e)}function z(e,t,r=!0){let s=W[e];if(!s)throw new Error(`Unknown multibase: ${e}`);let i=s.encode(t);return s.upper&&(i=i.toUpperCase()),r&&(i=s.prefix+i),i}const Q=(()=>{let e=1;for(;;){let t=128*e;if(!Number.isSafeInteger(t))break;e=t}return e})();function J(e){if(!Number.isSafeInteger(e)||e<0)throw new TypeError(`expected uvarint: ${e}`)}function ee(e){J(e);let t=1;for(;e>=128;t++)e=Math.floor(e/128);return t}function te(e,t=0){if(!ArrayBuffer.isView(e))throw new TypeError("expected ArrayBufferView");let r=0,s=1;for(;;){if(t>=e.length)throw new RangeError("buffer overflow");let i=e[t++];if(r+=(127&i)*s,0==(128&i))break;if(s==Q)throw new RangeError("uvarint overflow");s*=128}return[r,e.subarray(t)]}function re(e,t,r=0){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new TypeError("expected ArrayLike");for(J(t);;){if(r>=e.length)throw new RangeError("buffer overflow");if(t<128)break;e[r++]=127&t|128,t=Math.floor(t/128)}return e[r++]=t,r}class se{static from_str(e){return this.from_bytes(j(e))}static from_bytes(e){let t,r;if([t,e]=te(e),[r,e]=te(e),e.length!==r)throw new Error(`expected ${r}, got ${e.length} bytes`);return new this(t,e.slice())}constructor(e,t){this.code=e,this.hash=t}get length(){return ee(this.code)+ee(this.hash.length)+this.hash.length}get bytes(){let e=new Uint8Array(this.length);return this.write_bytes(e,0),e}write_bytes(e,t=0){return t=re(e,this.code,t),t=re(e,this.hash.length,t),e.set(this.hash,t),t}toJSON(){return{code:this.code,hash:this.hash}}}class ie{static from_str(e){if("string"!=typeof e)throw new TypeError("expected string");if(46==e.length&&e.startsWith("Qm"))return this.from_bytes(H.bytes_from_str(e));{let t=j(e);if(18==t[0])throw new Error(`CIDv0 cannot be multibase: ${e}`);return this.from_bytes(t)}}static from_bytes(e){if(!(e instanceof Uint8Array))throw new TypeError("expected Uint8Array");try{if(34==e.length&&18==e[0]&&32==e[1])return new ne(se.from_bytes(e));let t;if([t,e]=te(e),1===t){let t;return[t,e]=te(e),new oe(t,se.from_bytes(e))}throw new Error(`unsupported version: ${t}`)}catch(e){throw new Error(`Malformed CID: ${e}`,{cause:e})}}toJSON(){return{version:this.version,codec:this.codec,hash:this.hash}}}class ne extends ie{constructor(e){super(),this.hash=e}get version(){return 0}get codec(){return 112}get length(){return this.hash.bytes.length}get bytes(){return this.hash.bytes}upgrade_v0(){return new oe(this.codec,this.hash)}toString(e){if(void 0!==e&&"Q"!==e)throw new TypeError("expected base Q");return z("Q",this.bytes,!1)}}class oe extends ie{constructor(e,t){super(),this.codec=e,this.hash=t}get version(){return 1}get length(){return ee(this.version)+ee(this.codec)+this.hash.length}get bytes(){let e=new Uint8Array(this.length),t=0;return t=re(e,this.version,t),t=re(e,this.codec,t),this.hash.write_bytes(e,t),e}upgrade_v0(){return this}toString(e){if(void 0===e)if(114===this.codec)e="k";else e="b";return z(e,this.bytes,!0)}}function ae(e){let t;if("string"==typeof e?t=parseInt(e):"number"==typeof e&&(t=e),!Number.isSafeInteger(t))throw new TypeError(`Invalid chain: ${e}`);return`0x${t.toString(16)}`}class he{constructor(e){this._id=e,this.data=void 0}get id(){return this._id}get name(){return this.data?.name??`Chain(${this.id})`}explorer_address_uri(e){return this.data?.explore_address.replace("{}",e)}explorer_tx_uri(e){return this.data?.explore_tx.replace("{}",e)}toJSON(){return this.id}toString(){return`Chain(${this.id})`}}const ce={};function ue(e,t=!1){if(e instanceof he)return e;let r=ae(e),s=ce[r];if(!s&&t)throw new Error(`Unknown chain: ${r}`);return s}function le(){return Object.values(ce)}function de(e){if(e instanceof he)return e;let t=ae(e),r=ce[t];return r||(r=ce[t]=new he(t)),r}function fe(e){return{explore_base:e,explore_address:`${e}/address/{}`,explore_tx:`${e}/tx/{}`}}function _e(e){return-32e3===e.code&&"header not found"===e.message}de(1).data={name:"Mainnet",...fe("https://etherscan.io")},de(3).data={name:"Ropsten",...fe("https://ropsten.etherscan.io"),testnet:!0},de(4).data={name:"Rinkeby",...fe("https://rinkeby.etherscan.io"),testnet:!0},de(5).data={name:"Goerli",...fe("https://goerli.etherscan.io"),testnet:!0},de(43).data={name:"Kovan",...fe("https://kovan.etherscan.io"),testnet:!0},de(137).data={name:"Matic",...fe("https://polygonscan.com")},de(43114).data={name:"Avax C-chain",...fe("https://snowtrace.io")};async function pe(e,t){let r=3;for(;;)try{return await e(t)}catch(e){if(!(_e(e)&&r-- >0))throw e;await new Promise((e=>setTimeout(e,500)))}}async function ye({smart:e=!0,timeout:t=3e3}={}){return new Promise(((r,s)=>{let i,n;const o="ethereum#initialized";function a(){let t=globalThis.ethereum;if(t)return r(e?we(t):t),!0}a()||(i=setTimeout((()=>{globalThis?.removeEventListener(o,n),a()||s(new Error("No window.ethereum"))}),0|t),n=()=>{clearTimeout(i),globalThis?.removeEventListener(o,n),a()||s(new Error("jebaited"))},globalThis?.addEventListener(o,n))}))}function we(e){if(e.isSmartProvider)return e;if("function"!=typeof e.request)throw new TypeError("expected provider");const t=e.isMetaMask?"MetaMask":"Unknown Provider";let r;async function s(t){return"eth_chainId"===t.method&&r?r:pe(e.request.bind(e),t)}async function i(e,...t){return s({method:e,params:t})}return e.on("connect",(({chainId:e})=>{r=e})),e.on("chainChanged",(e=>{r=e})),e.on("disconnect",(()=>{r=void 0})),new Proxy(e,{get:function(e,n){switch(n){case"req":return i;case"request":return s;case"chain_id":return r;case"source":return t;case"isSmartProvider":return!0;case"disconnect":return e[n]??(()=>{});default:return e[n]}}})}class me{constructor(){this.queue=[]}add_static(e,t){let r=de(e);return t=we(t),this.queue.some((e=>e.provider===t))||this.queue.push({chain:r,provider:t}),this}add_dynamic(e){return e=we(e),this.queue.some((t=>t.provider===e))||this.queue.unshift({provider:e}),this}available_providers(){return this.queue.map((({chain:e,provider:t})=>{if(null==e&&(e=ue(t.chain_id)),e)return[e,t]})).filter((e=>e))}disconnect(){for(let{provider:e}of this.queue)e.disconnect?.()}async find_provider(e,t){let r=ue(e,t);if(r)for(let{provider:e,chain:t}of this.queue)if(void 0===t&&(t=ue(await e.request({method:"eth_chainId"}))),r===t)return e;if(t)throw new Error(`No provider for chain ${r}`)}view(e){let t=de(e),r=async e=>this.find_provider(t,e);return new Proxy(this,{get:(e,s)=>{switch(s){case"isProviderView":return!0;case"chain":return t;case"get_provider":return r;default:return e[s]}}})}}class Ee extends class{constructor(){this.__events={}}emit(e,...t){let r=this.__events[e];if(!r)return!1;for(let e of r)e(...t);return!0}on(e,t){let r=this.__events[e];return r||(this.__events[e]=r=[]),r.push(t),this}removeListener(e,t){let r=this.__events[e];if(r){let s=r.indexOf(t);s>=0&&(r.splice(s,1),0==r.length&&delete this.__events[e])}return this}}{get isSmartProvider(){return!0}async req(e,...t){return this.request({method:e,params:[...t]})}}class be extends Ee{constructor({url:e,WebSocket:t,source:r,request_timeout:s=3e4,idle_timeout:i=6e4}){if("string"!=typeof e)throw new TypeError("expected url");if(t||(t=globalThis.WebSocket),!t)throw new Error("unknown WebSocket implementation");super(),this.url=e,this._ws_api=t,this._request_timeout=s,this._idle_timeout=i,this._idle_timer=void 0,this._ws=void 0,this._terminate=void 0,this._reqs=void 0,this._subs=new Set,this._id=void 0,this._chain_id=void 0,this._source=r}get source(){return this._source??this.url}get idle_timeout(){return this._idle_timeout}set idle_timeout(e){this.idle_timeout=0|e,this._restart_idle()}disconnect(){this._terminate?.(new Error("Forced disconnect"))}_restart_idle(){if(clearTimeout(this._idle_timer),this._idle_timeout>0&&0==this._subs.size&&0==Object.keys(this._reqs).length){const{_terminate:e}=this;this._idle_timer=setTimeout((()=>{e(new Error("Idle timeout"))}),this._idle_timeout)}}async request(e){if("object"!=typeof e)throw new TypeError("expected object");let{method:t,params:r}=e;if("string"!=typeof t)throw new Error("expected method");if(r&&!Array.isArray(r))throw new Error("expected params array");switch(await this.ensure_connected(),t){case"eth_chainId":return this._chain_id;case"eth_subscribe":return this._request(e).then((e=>(this._subs.add(e),clearTimeout(this._idle_timer),e)));case"eth_unsubscribe":return this._request(e).then((e=>(this._subs.delete(r[0]),this._restart_idle(),e)));default:return this._request(e)}}_request(e){const t=++this._id,{_reqs:r,_ws:s,_request_timeout:i}=this;return clearTimeout(this._idle_timer),new Promise(((n,o)=>{let a=i>0?setTimeout((()=>{delete r[t],this._restart_idle(),o(new Error("Timeout"))}),i):void 0;r[t]={timer:a,ful:n,rej:o},s.send(JSON.stringify({jsonrpc:"2.0",id:t,...e}))}))}async ensure_connected(){let{_ws:e}=this;if(Array.isArray(e))return new Promise(((t,r)=>{e.push({ful:t,rej:r})}));if(e)return;const t=this._ws=[],r=new this._ws_api(this.url);try{await new Promise(((e,t)=>{this._terminate=t;let s=setTimeout((()=>t(new Error("Timeout"))),this._request_timeout);r.addEventListener("close",t),r.addEventListener("error",t),r.addEventListener("open",(()=>{r.removeEventListener("error",t),r.removeEventListener("close",t),clearTimeout(s),e()}))}))}catch(e){r.close(),this._ws=void 0,this._terminate=void 0;for(let{rej:r}of t)r(e);throw this.emit("connect-error",e),e}this._ws=r,this._id=0;let s,i=this._reqs={},n=this._terminate=e=>{r.removeEventListener("close",s),r.removeEventListener("error",n),r.close(),this._ws=void 0,this._terminate=void 0,this._reqs=void 0,this._id=void 0,this._chain_id=void 0,this._subs.clear(),clearTimeout(this._idle_timer);for(let{rej:t}of Object.values(i))t(e);this.emit("disconnect",e)};s=()=>n(new Error("Unexpected close")),r.addEventListener("close",s),r.addEventListener("error",n),r.addEventListener("message",(({data:e})=>{let t=JSON.parse(e),{id:r}=t;if(void 0===r){let{method:e,params:{subscription:r,result:s}}=t;this.emit("message",{type:e,data:{subscription:r,result:s}})}else{let e=i[r];if(!e)return;delete i[t.id],clearTimeout(e.timer),this._restart_idle();let{result:s,error:n}=t;if(s)return e.ful(s);let o=new Error(n?.message??"Unknown Error");"code"in n&&(o.code=n.code),e.rej(o)}})),this._chain_id=await this._request({method:"eth_chainId"}),this.emit("connect",{chainId:this._chain_id});for(let{ful:e}of t)e()}}class ge extends Ee{constructor({url:e,fetch:t,source:r,request_timeout:s=3e4,idle_timeout:i=6e4}){if("string"!=typeof e)throw new TypeError("expected url");if(!t){let e=globalThis.fetch;if(!e)throw new TypeError("unable to find fetch()");t=e.bind(globalThis)}super(),this.url=e,this._fetch_api=t,this._id=0,this._chain_id=void 0,this._request_timeout=0|s,this._idle_timeout=0|i,this._idle_timer=void 0,this._source=r}get source(){return this._source??this.url}async request(e){if("object"!=typeof e)throw new TypeError("expected object");let t=this._request_once.bind(this);if(!this._idle_timer){try{this._chain_id=await pe(t,{method:"eth_chainId"})}catch(e){throw this.emit("connect-error",e),e}this.emit("connect",{chainId:this._chain_id}),this._restart_idle()}switch(e.method){case"eth_chainId":return this._chain_id;case"eth_subscribe":case"eth_unsubscribe":throw new Error(`${e.method} not supported by FetchProvider`)}try{let r=await pe(t,e);return this._restart_idle(),r}catch(e){throw this._terminate(e),e}}_restart_idle(){clearTimeout(this._idle_timer),this._idle_timer=!(this._idle_timeout>0)||setTimeout((()=>{this._terminate(new Error("Idle timeout"))}),this._idle_timeout)}disconnect(){this._idle_timer&&this._terminate(new Error("Forced disconnect"))}_terminate(e){this.emit("disconnect",e),clearTimeout(this._idle_timer),this._idle_timer=void 0,this._chain_id=void 0}_fetch(e,...t){return this._fetch_api(this.url,{method:"POST",body:JSON.stringify({...e,jsonrpc:"2.0",id:++this._id}),cache:"no-store",...t})}async _request_once(e){let t,r;if(this._request_timeout>0){let r=new AbortController,s=setTimeout((()=>r.abort()),this._request_timeout);try{t=await this._fetch(e,{signal:r.signal})}finally{clearTimeout(s)}}else t=await this._fetch(e);if(200!==t.status)throw new Error(`Fetch failed: ${t.status}`);try{r=await t.json()}catch(e){throw new Error("Invalid provider response: expected json",{cause:e})}let{error:s}=r;if(!s)return r.result;let i=new Error(s.message??"unknown error");throw i.code=s.code,i}}async function Ce(e,t,r=null,s="latest"){if("object"!=typeof e)throw new TypeError("expected provider");"string"==typeof t&&(t={to:t}),r instanceof B&&(t.data=r.build_hex());try{let r=await e.request({method:"eth_call",params:[t,s]});return O.from_hex(r)}catch(e){throw-32e3==e.code&&"execution reverted"===e.message&&(e.reverted=!0),e}}async function Te(e,t,r){return Ce(e,t,B.method("supportsInterface(bytes4)").bytes(I(r))).then((e=>e.boolean())).catch((e=>{if(-32e3===e.code)return!1;throw e}))}var ve={BTC:0,LTC:2,DOGE:3,RDD:4,DASH:5,PPC:6,NMC:7,FTC:8,XCP:9,BLK:10,NSR:11,NBT:12,MZC:13,VIA:14,XCH:8444,RBY:16,GRS:17,DGC:18,CCN:828,DGB:20,MONA:22,CLAM:23,XPM:24,NEOS:25,JBS:26,ZRC:27,VTC:28,NXT:29,BURST:30,MUE:31,ZOOM:32,VASH:33,CDN:34,SDC:35,PKB:36,PND:37,START:38,MOIN:39,EXP:40,EMC2:41,DCR:42,XEM:43,PART:44,ARG:45,SHR:48,GCR:49,NVC:50,AC:51,BTCD:52,DOPE:53,TPC:54,AIB:55,EDRC:56,SYS:57,SLR:58,SMLY:59,ETH:60,ETC:61,PSB:62,LDCN:63,XBC:65,IOP:66,NXS:67,INSN:68,OK:69,BRIT:70,CMP:71,CRW:72,BELA:73,ICX:74,FJC:75,MIX:76,XVG:77,EFL:78,CLUB:79,RICHX:80,POT:81,QRK:82,TRC:83,GRC:84,AUR:85,IXC:86,NLG:87,BITB:88,BTA:1657,XMY:90,BSD:91,UNO:92,MTR:18e3,GB:94,SHM:95,CRX:96,BIQ:97,EVO:98,STO:99,BIGUP:100,GAME:101,DLC:102,ZYD:103,DBIC:104,STRAT:105,SH:106,MARS:107,UBQ:108,PTC:109,NRO:110,ARK:111,USC:112,THC:113,LINX:114,ECN:115,DNR:116,PINK:117,ATOM:118,PIVX:119,FLASH:120,ZEN:121,PUT:122,ZNY:123,UNIFY:124,XST:125,BRK:126,VC:127,XMR:128,VOX:129,NAV:130,FCT:7777777,EC:132,ZEC:133,LSK:134,STEEM:135,XZC:136,RBTC:137,RPT:139,LBC:140,KMD:141,BSQ:142,RIC:143,XRP:144,BCH:145,NEBL:146,ZCL:147,XLM:148,NLC2:149,WHL:150,ERC:151,DMD:152,BTM:153,BIO:154,XWCC:155,BTG:156,BTC2X:157,SSN:158,TOA:159,BTX:160,ACC:161,BCO:5249353,ELLA:163,PIRL:164,XNO:165,VIVO:166,FRST:167,HNC:168,BUZZ:169,MBRS:170,HC:171,HTML:172,ODN:173,ONX:174,RVN:175,GBX:176,BTCZ:177,POA:178,NYC:179,MXT:180,WC:181,MNX:182,BTCP:183,MUSIC:184,BCA:185,CRAVE:186,STAK:187,WBTC:188,LCH:189,EXCL:190,LCC:192,XFE:193,EOS:194,TRX:195,KOBO:196,HUSH:197,BANANO:198,ETF:199,OMNI:200,BIFI:201,UFO:202,CNMC:203,BCN:204,RIN:205,ATP:206,EVT:207,ATN:208,BIS:209,NEET:210,BOPO:211,OOT:212,ALIAS:213,MONK:842,BOXY:215,FLO:216,MEC:217,BTDX:218,XAX:219,ANON:220,LTZ:221,BITG:222,ICP:223,SMART:224,XUEZ:225,HLM:226,WEB:227,ACM:228,NOS:229,BITC:230,HTH:231,TZC:232,VAR:233,IOV:234,FIO:235,BSV:236,DXN:237,QRL:238,PCX:239,LOKI:240,NIM:242,SOV:243,JCT:244,SLP:245,EWT:246,UC:401,EXOS:248,ECA:249,SOOM:250,XRD:1022,FREE:252,NPW:253,BST:254,NANO:256,BTCC:257,ZEST:259,ABT:260,PION:261,DT3:262,ZBUX:263,KPL:264,TPAY:265,ZILLA:266,ANK:267,BCC:268,HPB:269,ONE:1023,SBC:271,IPC:272,DMTC:273,OGC:274,SHIT:275,ANDES:276,AREPA:277,BOLI:278,RIL:279,HTR:280,FCTID:281,BRAVO:282,ALGO:283,BZX:284,GXX:285,HEAT:286,XDN:287,FSN:288,CPC:337,BOLD:290,IOST:291,TKEY:292,USE:293,BCZ:294,IOC:295,ASF:296,MASS:297,FAIR:298,NUKO:299,GNX:300,DIVI:301,CMT:1122,EUNO:303,IOTX:304,ONION:305,"8BIT":306,ATC:307,BTS:308,CKB:309,UGAS:310,ADS:311,ARA:312,ZIL:313,MOAC:314,SWTC:315,VNSC:316,PLUG:317,MAN:318,ECC:319,RPD:320,RAP:321,GARD:322,ZER:323,EBST:324,SHARD:325,LINDA:326,CMM:327,BLOCK:328,AUDAX:329,LUNA:330,ZPM:331,KUVA:332,MEM:333,CS:498,SWIFT:335,FIX:336,VGO:338,DVT:339,N8V:340,MTNS:341,BLAST:342,DCT:343,AUX:344,USDP:345,HTDF:346,YEC:347,QLC:348,TEA:349,ARW:350,MDM:351,CYB:352,LTO:353,DOT:354,AEON:355,RES:356,AYA:357,DAPS:358,CSC:359,VSYS:360,NOLLAR:361,XNOS:362,CPU:363,LAMB:364,VCT:365,CZR:366,ABBC:367,HET:368,XAS:369,VDL:370,MED:371,ZVC:372,VESTX:373,DBT:374,SEOS:375,MXW:376,ZNZ:377,XCX:378,SOX:379,NYZO:380,ULC:381,RYO:88888,KAL:383,XSN:384,DOGEC:385,BMV:386,QBC:387,IMG:388,QOS:389,PKT:390,LHD:391,CENNZ:392,HSN:393,CRO:394,UMBRU:395,TON:607,NEAR:397,XPC:398,ZOC:399,NIX:400,GALI:402,OLT:403,XBI:404,DONU:405,EARTHS:406,HDD:407,SUGAR:408,AILE:409,TENT:410,TAN:411,AIN:412,MSR:413,SUMO:414,ETN:415,BYTZ:416,WOW:417,XTNC:418,LTHN:419,NODE:420,AGM:421,CCX:422,TNET:423,TELOS:424,AION:425,BC:426,KTV:427,ZCR:428,ERG:429,PESO:430,BTC2:431,XRPHD:432,WE:433,KSM:434,PCN:435,NCH:436,ICU:437,LN:438,DTP:439,BTCR:1032,AERGO:441,XTH:442,LV:443,PHR:444,VITAE:445,COCOS:446,DIN:447,SPL:448,YCE:449,XLR:450,KTS:556,DGLD:452,XNS:453,EM:454,SHN:455,SEELE:456,AE:457,ODX:458,KAVA:459,GLEEC:476,FIL:461,RUTA:462,CSDT:463,ETI:464,ZSLP:465,ERE:466,DX:467,CPS:468,BTH:469,MESG:470,FIMK:471,AR:472,OGO:473,ROSE:474,BARE:475,CLR:477,RNG:478,OLO:479,PEXA:480,MOON:481,OCEAN:482,BNT:483,AMO:484,FCH:485,LAT:486,COIN:487,VEO:488,CCA:489,GFN:490,BIP:491,KPG:492,FIN:493,BAND:494,DROP:495,BHT:496,LYRA:497,RUPX:499,THETA:500,SOL:501,THT:502,CFX:503,KUMA:504,HASH:505,CSPR:506,EARTH:507,ERD:508,CHI:509,KOTO:510,OTC:511,SEELEN:513,AETH:514,DNA:515,VEE:516,SIERRA:517,LET:518,BSC:9006,BTCV:520,ABA:521,SCC:522,EDG:523,AMS:524,GOSS:525,BU:526,GRAM:527,YAP:528,SCRT:529,NOVO:530,GHOST:531,HST:532,PRJ:533,YOU:534,XHV:535,BYND:536,JOYS:537,VAL:616,FLOW:539,SMESH:540,SCDO:541,IQS:542,BIND:543,COINEVO:544,SCRIBE:545,HYN:546,BHP:547,BBC:1111,MKF:549,XDC:550,STR:551,SUM:997,HBC:553,BCS:555,LKR:557,TAO:558,XWC:559,DEAL:560,NTY:561,TOP:562,STARS:563,AG:564,CICO:565,IRIS:566,NCG:567,LRG:568,SERO:569,BDX:570,CCXX:571,SLS:572,SRM:573,VLX:574,VIVT:575,BPS:576,NKN:577,ICL:578,BONO:579,PLC:580,DUN:581,DMCH:582,CTC:583,KELP:584,GBCR:585,XDAG:586,PRV:587,SCAP:588,TFUEL:589,GTM:590,RNL:591,GRIN:592,MWC:593,DOCK:594,POLYX:595,DIVER:596,XEP:597,APN:598,TFC:599,UTE:600,MTC:601,NC:602,XINY:603,DYN:3381,BUFS:605,STOS:606,TAFT:608,HYDRA:609,NOR:610,WCN:613,OPT:614,PSWAP:615,XOR:617,SSP:618,DEI:619,AXL:620,ZERO:621,ALPHA:622,BDCASH:623,NOBL:624,EAST:625,KDA:626,LORE:628,FNR:629,NEXUS:630,BTSG:639,LFC:640,AZERO:643,XLN:646,ZRB:648,UCO:650,PIRATE:660,SFRX:663,ACT:666,PRKL:667,SSC:668,GC:669,PLGR:670,MPLGR:671,YUNGE:677,Voken:678,Evrynet:680,KAR:686,CET:688,VEIL:698,GIO:699,XDAI:700,MCOIN:707,CHC:711,XTL:713,BNB:714,SIN:715,DLN:716,MCX:725,BMK:731,DENTX:734,ATOP:737,RAD:747,XPRT:750,BALLZ:768,COSA:770,BR:771,BTW:777,UIDD:786,ACA:787,BNC:788,TAU:789,PDEX:799,BEET:800,DST:3564,QVT:808,DVPN:811,VET:818,REEF:819,CLO:820,BDB:822,CRUZ:831,SAPP:832,KYAN:834,AZR:835,CFL:836,DASHD:837,TRTT:838,UCR:839,PNY:840,BECN:841,SAGA:843,SUV:844,ESK:845,OWO:846,PEPS:847,BIR:848,DSM:852,PRCY:853,MOB:866,IF:868,LUM:880,ZBC:883,ADF:886,NEO:888,TOMO:889,XSEL:890,LKSC:896,XEC:1899,LMO:900,HNT:904,FIS:907,SAAGE:909,META:916,FRA:917,DIP:925,RUNE:931,LTP:955,MATIC:966,TWINS:970,VCG:987,XAZAB:988,AIOZ:989,PEC:991,OKT:996,LBTC:1776,BCD:999,BTN:1e3,TT:1001,BKT:1002,NODL:1003,FTM:1007,RPG:1008,HT:1010,ELV:1011,BIC:1013,EVC:1020,ONT:1024,KEX:1026,MCM:1027,RISE:1120,ETSC:1128,DFI:1129,CDY:1145,HOO:1170,ALPH:1234,MOVR:1285,DFC:1337,HYC:1397,TENTSLP:1410,BEAM:1533,ELF:1616,AUDL:1618,ATH:1620,NEW:1642,BCX:1688,XTZ:1729,BBP:1777,JPYS:1784,VEGA:1789,ADA:1815,TES:1856,ZTX:1888,CLC:1901,VIPS:1919,CITY:1926,XX:1955,XMX:1977,TRTL:1984,EGEM:1987,HODL:1989,PHL:1990,SC:1991,MYT:1996,POLIS:1997,XMCC:1998,COLX:1999,GIN:2e3,MNP:2001,KIN:2017,EOSC:2018,GBT:2019,PKC:2020,SKT:2021,XHT:2022,MCASH:2048,TRUE:2049,IoTE:2112,XRG:2137,ASK:2221,QTUM:2301,ETP:2302,GXC:2303,CRP:2304,ELA:2305,SNOW:2338,AOA:2570,REOSC:2894,LUX:3003,XHB:3030,COS:3077,SEQ:3383,DEO:3552,NAS:2718,BND:2941,CCC:3276,ROI:3377,FC8:4040,YEE:4096,IOTA:4218,AXE:4242,XYM:4343,FIC:5248,HNS:5353,FUND:5555,STX:5757,VOW:5895,SLU:5920,GO:6060,MOI:6174,BPA:6666,SAFE:19165,ROGER:6969,TOPL:7091,BTV:7777,SKY:8e3,PAC:8192,KLAY:8217,BTQ:8339,SBTC:8888,NULS:8964,BTP:8999,AVAX:9e3,ARB:9001,BOBA:9002,LOOP:9003,STARK:9004,AVAXC:9005,NRG:9797,BTF:9888,GOD:9999,FO:1e4,RTM:10226,XRC:10291,XPI:10605,ESS:11111,IPOS:12345,MINA:12586,BTY:13107,YCC:13108,SDGO:15845,XTX:16181,ARDR:16754,FLUX:19167,RITO:19169,XND:20036,PWR:22504,BELL:25252,CHX:25718,ESN:31102,TEO:33416,BTCS:33878,BTT:34952,FXTC:37992,AMA:39321,AXIV:43028,EVE:49262,STASH:49344,CELO:52752,KETH:65536,GRLC:69420,GWL:70007,ZYN:77777,WICC:99999,HOME:100500,STC:101010,STRAX:105105,AKA:200625,GENOM:200665,ATS:246529,PI:314159,VALUE:333332,X42:424242,VITE:666666,SEA:888888,ILT:1171337,ETHO:1313114,XERO:1313500,LAX:1712144,EPK:3924011,HYD:4741444,BHD:5249354,PTN:5264462,WAN:5718350,WAVES:5741564,CRM:6517357,SEM:7562605,ION:7567736,WGR:7825266,OBSR:7825267,AFS:8163271,XDS:15118976,AQUA:61717561,HATCH:88888888,kUSD:91927009,GENS:99999996,EQ:99999997,FLUID:99999998,QKC:99999999,FVDC:608589380};function Ae(t){return new T(e().update(t).bytes)}function Se(e){return e.split(".")}function Oe(t){if("string"!=typeof t)throw new TypeError("expected string");let r=new Uint8Array(64);if(t.length>0)for(let s of Se(t).reverse())r.set(Ae(s).bytes,32),r.set(e().update(r).bytes,0);return new T(r.slice(0,32))}class Ne{constructor({provider:e,providers:t,ens_normalize:r,registry:s="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"}){if(!e)throw new Error("expected provider");if(this.provider=e,e.isProviderView)this.providers=e;else if(t){if(!(t instanceof me))throw new Error("invalid providers");this.providers=t}else{let t=new me;t.add_dynamic(e),this.providers=t}this.ens_normalize=r,this.registry=s,this.normalizer=void 0,this._dot_eth_contract=void 0,this._resolvers={}}normalize(e){return this.ens_normalize?.(e)??e}labelhash(e){if("string"==typeof e)return Ae(this.normalize(e));if(e instanceof T)return e;throw new TypeError("expected string or Uint256")}owner(e){try{return new Ie(this,m(e))}catch(t){let r=new Error(`Invalid address ${e}: ${t.message}`,{cause:t});throw r.isInvalid=!0,r.address=e,r}}async get_provider(){let e=this.provider;return e.isProviderView?e.get_provider():e}async call_registry(...e){return Ce(await this.get_provider(),this.registry,...e)}async get_resolver(e){return this.call_registry(B.method("resolver(bytes32)").number(e)).then((e=>e.addr())).then((e=>{if(p(e))return;let t=this._resolvers[e];return t||(t=this._resolvers[e]=new Re(this,e)),t}))}async resolve(e){let t;try{t=this.normalize(e)}catch(t){let r=new Error(`Name is invalid: ${t.message}`,{cause:t});throw r.isInvalid=!0,r.name=e,r}let r,s=Oe(t);try{r=await this.get_resolver(s)}catch(r){let i=new Error(`Unable to determine resolver: ${r.message}`,{cause:r});throw i.input=e,i.name=t,i.node=s,i}return new Be(this,e,t,s,r)}async primary_from_address(e){try{e=m(e,!1)}catch(t){let r=new TypeError(`Invalid address ${e}: ${t.message}`,{cause:t});throw r.input=e,r}let t=Oe(`${e.slice(2).toLowerCase()}.addr.reverse`),r=await this.get_resolver(t);if(r)try{return(await Ce(await this.get_provider(),r.address,B.method("name(bytes32)").number(t))).string()}catch(e){throw new Error(`Read primary failed: ${e.message}`,{cause:e})}}async get_eth_contract(){return void 0!==this._dot_eth_contract?this._dot_eth_contract:f(this,"_dot_eth_contract",this.resolve("eth").then((e=>e.get_owner())).then((e=>e.address)))}async is_dot_eth_available(e){return(await Ce(await this.get_provider(),await this.get_eth_contract(),B.method("available(uint256)").number(this.labelhash(e)))).boolean()}async get_dot_eth_owner(e){try{return this.owner((await Ce(await this.get_provider(),await this.get_eth_contract(),B.method("ownerOf(uint256)").number(this.labelhash(e)))).addr())}catch(e){if(e.reverted)return;throw e}}}class Re{constructor(e,t){this.ens=e,this.address=t,this._interfaces={}}async supports_interface(e){let t=R(e),r=this._interfaces[t];return void 0!==r?r:f(this._interfaces,t,this.ens.get_provider().then((t=>Te(t,this.address,e))))}toJSON(){return this.address}}class Ie{constructor(e,t){this.ens=e,this.address=t,this._primary=void 0}toJSON(){return this.address}async get_primary_name(){return void 0!==this._primary?this._primary:f(this,"_primary",this.ens.primary_from_address(this.address))}async resolve(){let e=await this.get_primary_name();if(null===e)throw new Error(`No name for address: ${address}`);if(!e)throw new Error(`Primary not set for address: ${address}`);return this.ens.resolve(e)}}class Be{constructor(e,t,r,s,i){this.ens=e,this.input=t,this.name=r,this.node=s,this.resolver=i,this.resolved=new Date,this._owner=void 0,this._address=void 0,this._display=void 0,this._avatar=void 0,this._pubkey=void 0,this._content=void 0,this._text={},this._addr={}}get labels(){return Se(this)}toJSON(){return this.name}assert_valid_resolver(){if(!this.resolver)throw new Error("No resolver")}async call_resolver(...e){return this.assert_valid_resolver(),Ce(await this.ens.get_provider(),this.resolver.address,...e)}async get_address(){return void 0!==this._address?this._address:(this.assert_valid_resolver(),f(this,"_address",(async()=>{const e="addr(bytes32)";let t;if(await this.resolver.supports_interface("addr(bytes32,uint256)"))t=this.get_addr(60);else{if(!await this.resolver.supports_interface(e))throw new Error("Resolver does not support addr");t=this.call_resolver(B.method(e).number(this.node)).then((e=>e.read_addr_bytes()))}let r=await t;if(0==r.length)return w;if(20!=r.length)throw new Error("Invalid ETH Address: expected 20 bytes");return m(s(r))})()))}async get_owner(){return void 0!==this._owner?this._owner:f(this,"_owner",this.ens.call_registry(B.method("owner(bytes32)").number(this.node)).then((e=>new Ie(this.ens,e.addr()))).catch((e=>{throw new Error(`Read owner failed: ${e.message}`,{cause:e})})))}async get_owner_address(){return(await this.get_owner()).address}async get_owner_primary_name(){return(await this.get_owner()).get_primary_name()}async is_owner_primary_name(){return this.is_equivalent_name(await this.get_owner_primary_name())}is_input_normalized(){return this.input===this.name}is_equivalent_name(e){try{return this.assert_equivalent_name(e),!0}catch(e){return!1}}assert_equivalent_name(e){if(e===this.name)return;if(!e)throw new Error("Name is empty");let t;try{t=this.ens.normalize(e)}catch(t){throw new Error(`Name "${e}" is invalid: ${t.message}`,{cause:t})}if(t!==this.name)throw new Error(`${e} does not match ${this.name}`)}async is_input_display(){let e;return this.resolver&&(e=await this.get_text("display")),e?this.input===e&&this.is_equivalent_name(e):this.input===this.name}async get_display_name(){return void 0!==this._display?this._display:f(this,"_display",this.get_text("display").then((e=>this.is_equivalent_name(e)?e:this.name)))}async get_avatar(){return void 0!==this._avatar?this._avatar:f(this,"_avatar",xe(await this.get_text("avatar"),this.ens.providers,await this.get_address()))}async get_text(e){if("string"!=typeof e)throw new TypeError("expected string");let t=this._text[e];return void 0!==t?t:(this.assert_valid_resolver(),f(this._text,e,(async()=>{const t="text(bytes32,string)";if(!await this.resolver.supports_interface(t))throw new Error("Resolver does not support text");try{return(await this.call_resolver(B.method(t).number(this.node).string(e))).string()}catch(t){throw new Error(`Error reading text ${e}: ${t.message}`,{cause:t})}})()))}async get_texts(e){if(void 0===e)e=Object.keys(this._text);else if(!Array.isArray(e))throw new TypeError("expected array");let t=await Promise.all(e.map((e=>this.get_text(e))));return Object.fromEntries(e.map(((e,r)=>[e,t[r]])))}async get_addr(e){let t=Xe(e),r=this._addr[t];return void 0!==r?r:(this.assert_valid_resolver(),f(this._addr,t,(async()=>{const e="addr(bytes32,uint256)";if(!await this.resolver.supports_interface(e))throw new Error("Resolver does not support text");try{return(await this.call_resolver(B.method(e).number(this.node).number(t))).memory()}catch(e){throw new Error(`Error reading addr ${Pe(t,!0)}: ${e.message}`,{cause:e})}})()))}async get_addrs(e,t=!0){let r;if(void 0===e)r=Object.keys(this._addr);else{if(!Array.isArray(e))throw new TypeError("expected array");r=e.map(Xe)}let s=await Promise.all(r.map((e=>this.get_addr(e))));return Object.fromEntries(r.map(((e,r)=>[t?Pe(e):e,s[r]])))}async get_pubkey(){return void 0!==this._pubkey?this._pubkey:(this.assert_valid_resolver(),f(this,"_pubkey",(async()=>{try{let e=await this.call_resolver(B.method("pubkey(bytes32)").number(this.node));return{x:e.uint256(),y:e.uint256()}}catch(e){throw new Error(`Error reading pubkey: ${e.message}`,{cause:e})}})()))}async get_content(){return void 0!==this._content?this._content:(this.assert_valid_resolver(),f(this,"_content",(async()=>{let e;try{e=(await this.call_resolver(B.method("contenthash(bytes32)").number(this.node))).memory()}catch(e){throw new Error(`Error reading content: ${e.message}`,{cause:e})}if(0==e.length)return{};let t=Le(e);return t.hash=e,t})()))}}function Le(e){let t;switch([t,e]=te(e),t){case 227:{let r={type:"ipfs",protocol:t};try{let t=ie.from_bytes(e);r.cid=t,r.url=`ipfs://${t.toString()}`}catch(e){r.error=e}return r}case 229:{let r={type:"ipns",protocol:t};try{let t=ie.from_bytes(e);if(1!==t.version)throw new Error("invalid CID version");if(0!==t.hash.code)throw new Error("expected identity hash");r.cid=t,r.url=`ipns://${t}`}catch(e){r.error=e}return r}default:return{type:"unknown",protocol:t}}}async function xe(e,t,r){if("string"!=typeof e)throw new Error("Invalid avatar: expected string");if(0==e.length)return{type:"null"};if(e.includes("://")||e.startsWith("data:"))return{type:"url",url:e};let s=e.split("/"),i=s[0];if(i.startsWith("eip155:")){if(s.length<2)return{type:"invalid",error:"expected contract"};if(s.length<3)return{type:"invalid",error:"expected token"};let e;try{e=ae(i.slice(i.indexOf(":")+1))}catch(e){return{type:"invalid",error:e.message}}let n=s[1];if(n.startsWith("erc721:")){let i,o=n.slice(n.indexOf(":")+1);try{o=m(o)}catch(e){return{type:"invalid",error:`Invalid contract address: ${e.message}`}}try{i=T.from_str(s[2])}catch(e){return{type:"invalid",error:`Invalid token: ${e.message}`}}let a={type:"nft",interface:"erc721",contract:o,token:i,chain_id:e};if(t instanceof me&&(t=await(t?.find_provider(e))),t)try{let[e,s]=await Promise.all([Ce(t,o,B.method("ownerOf(uint256)").number(i)).then((e=>e.addr())),Ce(t,o,B.method("tokenURI(uint256)").number(i)).then((e=>e.string()))]);a.owner=e,a.meta_uri=s,"string"==typeof r&&(a.owned=r.toUpperCase()===e.toUpperCase()?1:0)}catch(e){return{type:"invalid",error:"invalid response from contract"}}return a}if(n.startsWith("erc1155:")){let i,o=n.slice(n.indexOf(":")+1);try{o=m(o)}catch(e){return{type:"invalid",error:`Invalid contract address: ${e.message}`}}try{i=T.from_str(s[2])}catch(e){return{type:"invalid",error:`Invalid token: ${e.message}`}}let a={type:"nft",interface:"erc1155",contract:o,token:i,chain_id:e};if(t instanceof me&&(t=await(t?.find_provider(e))),t)try{let[e,s]=await Promise.all([E(r)?Ce(t,o,B.method("balanceOf(address,uint256)").addr(r).number(i)).then((e=>e.number())):-1,Ce(t,o,B.method("uri(uint256)").number(i)).then((e=>e.string()))]);a.meta_uri=s.replace("{id}",i.hex.slice(2)),e>=0&&(a.owned=e)}catch(e){return{type:"invalid",error:"invalid response from contract"}}return a}return{type:"invalid",error:`unsupported contract interface: ${n}`}}return{type:"unknown"}}function Pe(e,t=!1){let r=Object.values(ve).indexOf(e);if(r>=0){let s=Object.keys(ve)[r];return t&&(s=`${s}<${e}>`),s}return"0x"+x.toString(16).padStart(4,"0")}function Xe(e){if("string"==typeof e){let t=ve[e];if("number"!=typeof t)throw new Error(`Unknown address type for name: ${e}`);return t}if(Number.isSafeInteger(e))return e;throw new TypeError(`Invalid address type: ${e}`)}class De{constructor(e,t,{strict:r=!0,cache:s=!0}={}){this.provider=e,this.address=m(t),this.strict=r,this._type=void 0,this._name=void 0,this._supply=void 0,s&&(this.token_uris={})}async call(...e){return Ce(await this.get_provider(),this.address,...e)}async supports(e){return Te(await this.get_provider(),this.address,e)}async get_provider(){let e=this.provider;return e.isProviderView?e.get_provider():e}async get_type(){return void 0!==this._type?this._type:"0xb47e3cd837dDF8e4c57F05d70Ab865de6e193BBB"===this.address?this._type="CryptoPunks":f(this,"_type",(async()=>await this.supports("d9b67a26")?"ERC-1155":!this.strict||await this.supports("80ac58cd")||await this.supports("d31b620d")?"ERC-721":"Unknown")())}async _uri_from_token(e){switch(await this.get_type()){case"CryptoPunks":{let{dec:t}=e;return _({name:`CryptoPunk #${t}`,image:`https://www.larvalabs.com/public/images/cryptopunks/punk${t}.png`,external_url:`https://www.larvalabs.com/cryptopunks/details/${t}`})}case"ERC-721":return this.call(B.method("tokenURI(uint256)").number(e)).then((e=>e.string())).then((e=>Me(e.trim())));case"ERC-1155":return this.call(B.method("uri(uint256)").number(e)).then((e=>e.string())).then((t=>Me(t.replace("{id}",e.hex.slice(2)).trim())));default:throw new Error(`unable to query ${e} from ${this.address}`)}}async get_token_uri(e){let t=T.wrap(e),r=this.token_uris;if(!r)return this._uri_from_token(t);let s=t.hex,i=r[s];return void 0!==i?i:f(r,s,this._uri_from_token(t))}async get_name(){return void 0!==this._name?this._name:f(this,"_name",(async()=>{switch(await this.get_type()){case"CryptoPunks":case"ERC-721":try{return(await this.call(B.method("name()"))).string()}catch(e){throw new Error(`Error reading name: ${e.message}`,{cause:e})}default:return""}})())}async get_supply(){return void 0!==this._supply&&this._supply,f(this,"_supply",(async()=>{switch(await this.get_type()){case"CryptoPunks":case"ERC-721":try{return(await this.call(B.method("totalSupply()"))).number()}catch(e){if(err.reverted)return NaN;throw new Error(`Error reading supply: ${e.message}`,{cause:e})}default:return NaN}})())}}function Me(e){try{return se.from_str(e),`ipfs://${e}`}catch(e){}let t;return(t=e.match(/^ipfs\:\/\/ipfs\/(.*)$/i))?`ipfs://${t[1]}`:e}export{O as ABIDecoder,B as ABIEncoder,ve as ADDR_TYPES,K as BASE10,F as BASE16,Y as BASE2,G as BASE32,V as BASE32_HEX,$ as BASE36,H as BASE58_BTC,U as BASE64,k as BASE64_URL,q as BASE8,ie as CID,ne as CIDv0,oe as CIDv1,he as Chain,Ne as ENS,Be as ENSName,Ie as ENSOwner,Re as ENSResolver,ge as FetchProvider,De as NFT,w as NULL_ADDRESS,me as Providers,T as Uint256,be as WebSocketProvider,J as assert_uvarint,I as bytes4_from_method,i as bytes_from_hex,n as bytes_from_utf8,d as compare_arrays,_ as data_uri_from_json,j as decode_multibase,le as defined_chains,ye as determine_window_provider,z as encode_multibase,de as ensure_chain,Ce as eth_call,ue as find_chain,Me as fix_multihash_uri,Pe as format_addr_type,s as hex_from_bytes,R as hex_from_method,b as is_checksum_address,p as is_null_hex,E as is_valid_address,e as keccak,Ae as labelhash,Se as labels_from_name,S as left_truncate_bytes,we as make_smart,Oe as namehash,Xe as parse_addr_type,xe as parse_avatar,Le as parse_content,f as promise_object_setter,te as read_uvarint,y as replace_ipfs_protocol,A as set_bytes_to_number,t as sha3,r as shake,g as short_address,ee as sizeof_uvarint,m as standardize_address,ae as standardize_chain_id,Te as supports_interface,v as unsigned_from_bytes,o as utf8_from_bytes,re as write_uvarint};
