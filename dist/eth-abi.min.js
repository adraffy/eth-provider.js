function i(r=256){return new e(r,1)}function o(e){if("string"!=typeof e)throw TypeError("expected string");var t=(e=unescape(encodeURIComponent(e)))["length"];let i=new Uint8Array(t);for(let r=0;r<t;r++)i[r]=e.charCodeAt(r);return i}function n(e){if("string"!=typeof e)throw TypeError("expected string");let t=0;e.startsWith("0x")&&(t+=2);var i=(e=1&e.length?"0"+e:e).length-t>>1;let n=new Uint8Array(i);for(let r=0;r<i;r++){var s=parseInt(e.slice(t,t+=2),16);if(Number.isNaN(s))throw new TypeError("expected hex byte");n[r]=s}return n}function t(r){return[...r].map(r=>r.toString(16).padStart(2,"0")).join("")}class e extends class{constructor(r,e){var t=1600;if(31&r)throw new Error("capacity % 32 != 0");if(r<0||t<=r)throw new Error("capacity must be [0,1600)");this.sponge=Array(50).fill(0),this.block_count=t-r>>5,this.block_index=0,this.suffix=e,this.ragged_block=0,this.ragged_shift=0}update(r){if(!(r instanceof Uint8Array))if(r instanceof ArrayBuffer)r=new Uint8Array(r);else if(Array.isArray(r))r=Uint8Array.from(r);else{if("string"!=typeof r)throw new TypeError("expected bytes");r=o(r)}let e=0;var t=r.length;if(0<this.ragged_shift&&(e=this._add_ragged(r,0),e==t))return this;let{sponge:i,block_index:n,block_count:s}=this;for(;e+4<=t;e+=4)i[n++]^=r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24,n==s&&(a(i),n=0);return this.block_index=n,e<t&&this._add_ragged(r,e),this}_add_ragged(r,e){let{ragged_shift:t,ragged_block:i}=this,n=0;for(;e<r.length&&t<32;n++,e++,t+=8)i|=r[e]<<t;return 32==t&&(this._add_block(i),t=0,i=0),this.ragged_block=i,this.ragged_shift=t,n}_add_block(r){let{sponge:e,block_index:t,block_count:i}=this;e[t++]^=r,t==i&&(a(e),t=0),this.block_index=t}finalize(){let{sponge:r,suffix:e,ragged_shift:t,block_index:i,block_count:n}=this;if(t){if(-1==t)return this;e=this.ragged_block|e<<t}r[i]^=e,r[n-1]^=2147483648,a(r),this.ragged_shift=-1}}{constructor(r,e){super(r<<1,e),this.size=r>>5}get hex(){return t(this.bytes)}get bytes(){this.finalize();var{size:e,sponge:t}=this;let i=new Int32Array(e);for(let r=0;r<e;r++)i[r]=t[r];return new Uint8Array(i.buffer)}}const Y=[1,0,32898,0,32906,-2147483648,-2147450880,-2147483648,32907,0,-2147483647,0,-2147450751,-2147483648,32777,-2147483648,138,0,136,0,-2147450871,0,-2147483638,0,-2147450741,0,139,-2147483648,32905,-2147483648,32771,-2147483648,32770,-2147483648,128,-2147483648,32778,0,-2147483638,-2147483648,-2147450751,-2147483648,32896,-2147483648,-2147483647,0,-2147450872,-2147483648];function a(e){for(let r=0;r<48;r+=2){var t=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],n=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],h=e[6]^e[16]^e[26]^e[36]^e[46],f=e[7]^e[17]^e[27]^e[37]^e[47],l=e[8]^e[18]^e[28]^e[38]^e[48],u=e[9]^e[19]^e[29]^e[39]^e[49],g=l^(n<<1|s>>>31),c=u^(s<<1|n>>>31);e[0]^=g,e[1]^=c,e[10]^=g,e[11]^=c,e[20]^=g,e[21]^=c,e[30]^=g,e[31]^=c,e[40]^=g,e[41]^=c,c=i^(a<<1|o>>>31),e[2]^=g=t^(o<<1|a>>>31),e[3]^=c,e[12]^=g,e[13]^=c,e[22]^=g,e[23]^=c,e[32]^=g,e[33]^=c,e[42]^=g,e[43]^=c,c=s^(f<<1|h>>>31),e[4]^=g=n^(h<<1|f>>>31),e[5]^=c,e[14]^=g,e[15]^=c,e[24]^=g,e[25]^=c,e[34]^=g,e[35]^=c,e[44]^=g,e[45]^=c,c=a^(u<<1|l>>>31),e[6]^=g=o^(l<<1|u>>>31),e[7]^=c,e[16]^=g,e[17]^=c,e[26]^=g,e[27]^=c,e[36]^=g,e[37]^=c,e[46]^=g,e[47]^=c,c=f^(i<<1|t>>>31),e[8]^=g=h^(t<<1|i>>>31),e[9]^=c,e[18]^=g,e[19]^=c,e[28]^=g,e[29]^=c,e[38]^=g,e[39]^=c,e[48]^=g,e[49]^=c;var d=e[0],y=e[1],p=e[11]<<4|e[10]>>>28,w=e[10]<<4|e[11]>>>28,b=e[20]<<3|e[21]>>>29,x=e[21]<<3|e[20]>>>29,_=e[31]<<9|e[30]>>>23,m=e[30]<<9|e[31]>>>23,v=e[40]<<18|e[41]>>>14,A=e[41]<<18|e[40]>>>14,E=e[2]<<1|e[3]>>>31,k=e[3]<<1|e[2]>>>31,U=e[13]<<12|e[12]>>>20,T=e[12]<<12|e[13]>>>20,I=e[22]<<10|e[23]>>>22,B=e[23]<<10|e[22]>>>22,C=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,S=e[42]<<2|e[43]>>>30,z=e[43]<<2|e[42]>>>30,N=e[5]<<30|e[4]>>>2,L=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,j=e[15]<<6|e[14]>>>26,W=e[25]<<11|e[24]>>>21,$=e[24]<<11|e[25]>>>21,D=e[34]<<15|e[35]>>>17,O=e[35]<<15|e[34]>>>17,V=e[45]<<29|e[44]>>>3,q=e[44]<<29|e[45]>>>3,F=e[6]<<28|e[7]>>>4,G=e[7]<<28|e[6]>>>4,H=e[17]<<23|e[16]>>>9,J=e[16]<<23|e[17]>>>9,K=e[26]<<25|e[27]>>>7,P=e[27]<<25|e[26]>>>7,Q=e[36]<<21|e[37]>>>11,X=e[37]<<21|e[36]>>>11,s=e[47]<<24|e[46]>>>8,n=e[46]<<24|e[47]>>>8,a=e[8]<<27|e[9]>>>5,o=e[9]<<27|e[8]>>>5,l=e[18]<<20|e[19]>>>12,u=e[19]<<20|e[18]>>>12,f=e[29]<<7|e[28]>>>25,h=e[28]<<7|e[29]>>>25,t=e[38]<<8|e[39]>>>24,i=e[39]<<8|e[38]>>>24,g=e[48]<<14|e[49]>>>18,c=e[49]<<14|e[48]>>>18;e[0]=d^~U&W,e[1]=y^~T&$,e[10]=F^~l&b,e[11]=G^~u&x,e[20]=E^~M&K,e[21]=k^~j&P,e[30]=a^~p&I,e[31]=o^~w&B,e[40]=N^~H&f,e[41]=L^~J&h,e[2]=U^~W&Q,e[3]=T^~$&X,e[12]=l^~b&C,e[13]=u^~x&R,e[22]=M^~K&t,e[23]=j^~P&i,e[32]=p^~I&D,e[33]=w^~B&O,e[42]=H^~f&_,e[43]=J^~h&m,e[4]=W^~Q&g,e[5]=$^~X&c,e[14]=b^~C&V,e[15]=x^~R&q,e[24]=K^~t&v,e[25]=P^~i&A,e[34]=I^~D&s,e[35]=B^~O&n,e[44]=f^~_&S,e[45]=h^~m&z,e[6]=Q^~g&d,e[7]=X^~c&y,e[16]=C^~V&F,e[17]=R^~q&G,e[26]=t^~v&E,e[27]=i^~A&k,e[36]=D^~s&a,e[37]=O^~n&o,e[46]=_^~S&N,e[47]=m^~z&L,e[8]=g^~d&U,e[9]=c^~y&T,e[18]=V^~F&l,e[19]=q^~G&u,e[28]=v^~E&M,e[29]=A^~k&j,e[38]=s^~a&p,e[39]=n^~o&w,e[48]=S^~N&H,e[49]=z^~L&J,e[0]^=Y[r],e[1]^=Y[r+1]}}function s(e){if("string"==typeof e){if(/^(0x)?[a-f0-9]{0,12}$/i.test(e))return parseInt(e,16);e=n(e)}else if(Array.isArray(e))e=Uint8Array.from(e);else if(ArrayBuffer.isView(e))e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else{if(!(e instanceof ArrayBuffer))throw new TypeError("unknown number to byte conversion");e=new Uint8Array(e,0,e.byteLength)}if(7<e.length){var t=e.length-7;for(let r=0;r<t;r++)if(0<e[r])throw new RangeError("overflow");e=e.subarray(t)}let r=0;for(var i of e)r=256*r+i;if(!Number.isSafeInteger(r))throw new RangeError("overflow");return r}class r{static from_hex(r){return new this(n(r))}constructor(r){this.buf=r,this.pos=0}get remaining(){return this.buf.length-this.pos}read(r){let{pos:e,buf:t}=this;var i=e+r;if(i>t.length)throw new Error("overflow");r=t.subarray(e,i);return this.pos=i,r}byte(){var{pos:r,buf:e}=this;if(r>=e.length)throw new Error("overflow");return this.pos=r+1,e[r]}big(r=32){return BigInt("0x"+t(this.read(r)))}number(r=32){return s(this.read(r))}string(){return function(r){try{return decodeURIComponent(escape(String.fromCharCode(...r)))}catch(r){throw new Error("malformed utf8")}}(this.memory())}memory(){var r=(i=this.number())+32;let e=this["buf"];if(r>e.length)throw new RangeError("overflow");var t=s(e.subarray(i,r)),i=r;if((r+=t)>e.length)throw new RangeError("overflow");return e.subarray(i,r)}addr(r=!0){if(0!=this.number(12))throw new TypeError("expected zero");var e=t(this.read(20));return r?function(r){if("string"!=typeof r)throw new TypeError("expected string");if(r=(r=r.startsWith("0x")?r.slice(2):r).toLowerCase(),!/^[a-f0-9]{40}$/.test(r))throw new TypeError("expected 40-char hex");let t=i().update(r).hex;return"0x"+[...r].map((r,e)=>56<=t.charCodeAt(e)?r.toUpperCase():r).join("")}(e):"0x"+e}uvarint(){let r=0,e=1;for(;;){var t=this.byte();if(r+=(127&t)*e,t<=127)break;if(70368744177664<e)throw new RangeException("overflow");e*=128}return r}}function h(i,e){if("number"==typeof e){if(!Number.isSafeInteger(e))throw new RangeError("overflow");for(let r=i.length-1;e&&0<=r;r--)i[r]=e,e=Math.floor(e/256)}else{if(!(e instanceof BigInt))throw new TypeError("unknown integer: "+e);{let t=e.toString(16);var n=t["length"];for(let r=i.length-1,e=n;0<=r&&0<e;r--,e-=2)i[r]=parseInt(t.slice(Math.max(0,e-2),e),16)}}}class f{static method(r){if("string"!=typeof r)throw new TypeError("expected string");let e=new f(4);if(r.includes("("))e.add_bytes(i().update(r).bytes.subarray(0,4));else if(e.add_hex(r),4!=e.pos)throw new Error("method should be a signature or 8-char hex");return e}constructor(r=0,e=256){if(!Number.isSafeInteger(e)||e<1)throw new TypeError("expected positive initial capacity");this.buf=new Uint8Array(e),this.pos=0,this.offset=r,this.tails=[]}reset(){return this.buf.fill(0),this.tails.length=0,this.pos=0,this}build_hex(){return"0x"+t(this.build())}build(){let{pos:e,tails:t,offset:i}=this;var n=t.reduce((r,[,e])=>e.length,0);if(0<n){this.alloc(n);let r=this["buf"];for(var[s,o]of t)h(r.subarray(s,s+32),e-i),r.set(o,e),e+=o.length}return this.buf.subarray(0,e)}alloc(e){if("number"!=typeof e||e<1)throw new TypeError("expected positive size");let{buf:t,pos:r}=this;var i=r+e;if(i>t.length){let r=new Uint8Array(Math.max(t.length+e,t.length<<1));r.set(t),this.buf=t=r}return this.pos=i,t.subarray(r,i)}big(r,e=32){let t=n(r.toString(16));return t.length>e&&(t=t.subarray(t.length-e)),this.alloc(e).set(t,e-t.length),this}number(r,e=32){return h(this.alloc(e),r),this}string(r){return this.memory(o(r))}memory(r){var e=this["pos"];this.alloc(32);let t=new Uint8Array(r.length+63&-32);return h(t.subarray(0,32),r.length),t.set(r,32),this.tails.push([e,t]),this}addr(r){r=n(r);if(20!=r.length)throw new TypeError("expected address");return this.alloc(32).set(r,12),this}add_hex(r){return this.add_bytes(n(r))}add_bytes(r){if(!(r instanceof Uint8Array))if(r instanceof ArrayBuffer)r=new Uint8Array(r);else if(Array.isArray(r))r=Uint8Array.from(r);else{if("string"!=typeof r)throw new TypeError("expected bytes");r=o(r)}return this.alloc(r.length).set(r),this}}export{r as ABIDecoder,f as ABIEncoder,s as number_from_abi};