function i(e=256){return new r(e,1)}function s(t){if(typeof t!=="string")throw TypeError("expected string");t=unescape(encodeURIComponent(t));let{length:r}=t;let i=new Uint8Array(r);for(let e=0;e<r;e++){i[e]=t.charCodeAt(e)}return i}function n(r){if(typeof r!=="string")throw TypeError("expected string");let i=0;if(r.startsWith("0x"))i+=2;if(r.length&1)r=`0${r}`;let e=r.length-i>>1;let n=new Uint8Array(e);for(let t=0;t<e;t++){let e=parseInt(r.slice(i,i+=2),16);if(Number.isNaN(e))throw new TypeError("expected hex byte");n[t]=e}return n}function l(e){return[...e].map(e=>e.toString(16).padStart(2,"0")).join("")}function e(e){try{return decodeURIComponent(escape(String.fromCharCode(...e)))}catch(e){throw new Error("malformed utf8")}}class t{constructor(e,t){const r=1600;if(e&31)throw new Error("capacity % 32 != 0");if(e<0||e>=r)throw new Error(`capacity must be [0,${r})`);this.sponge=Array(50).fill(0);this.block_count=r-e>>5;this.block_index=0;this.suffix=t;this.ragged_block=0;this.ragged_shift=0}update(e){if(!(e instanceof Uint8Array)){if(e instanceof ArrayBuffer){e=new Uint8Array(e)}else if(Array.isArray(e)){e=Uint8Array.from(e)}else if(typeof e==="string"){e=s(e)}else{throw new TypeError("expected bytes")}}let t=0;let r=e.length;if(this.ragged_shift>0){t=this._add_ragged(e,0);if(t==r)return this}let{sponge:i,block_index:n,block_count:l}=this;for(;t+4<=r;t+=4){i[n++]^=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(n==l){o(i);n=0}}this.block_index=n;if(t<r)this._add_ragged(e,t);return this}_add_ragged(e,t){let{ragged_shift:r,ragged_block:i}=this;let n=0;for(;t<e.length&&r<32;n++,t++,r+=8){i|=e[t]<<r}if(r==32){this._add_block(i);r=0;i=0}this.ragged_block=i;this.ragged_shift=r;return n}_add_block(e){let{sponge:t,block_index:r,block_count:i}=this;t[r++]^=e;if(r==i){o(t);r=0}this.block_index=r}finalize(){let{sponge:e,suffix:t,ragged_shift:r,block_index:i,block_count:n}=this;if(r){if(r==-1)return this;t=this.ragged_block|t<<r}e[i]^=t;e[n-1]^=2147483648;o(e);this.ragged_shift=-1}}class r extends t{constructor(e,t){super(e<<1,t);this.size=e>>5}get hex(){return l(this.bytes)}get bytes(){this.finalize();let{size:t,sponge:r}=this;let i=new Int32Array(t);for(let e=0;e<t;e++){i[e]=r[e]}return new Uint8Array(i.buffer)}}const fe=[1,0,32898,0,32906,-2147483648,-2147450880,-2147483648,32907,0,-2147483647,0,-2147450751,-2147483648,32777,-2147483648,138,0,136,0,-2147450871,0,-2147483638,0,-2147450741,0,139,-2147483648,32905,-2147483648,32771,-2147483648,32770,-2147483648,128,-2147483648,32778,0,-2147483638,-2147483648,-2147450751,-2147483648,32896,-2147483648,-2147483647,0,-2147450872,-2147483648];function o(ae){for(let he=0;he<48;he+=2){let e=ae[0]^ae[10]^ae[20]^ae[30]^ae[40];let t=ae[1]^ae[11]^ae[21]^ae[31]^ae[41];let r=ae[2]^ae[12]^ae[22]^ae[32]^ae[42];let i=ae[3]^ae[13]^ae[23]^ae[33]^ae[43];let n=ae[4]^ae[14]^ae[24]^ae[34]^ae[44];let l=ae[5]^ae[15]^ae[25]^ae[35]^ae[45];let s=ae[6]^ae[16]^ae[26]^ae[36]^ae[46];let o=ae[7]^ae[17]^ae[27]^ae[37]^ae[47];let h=ae[8]^ae[18]^ae[28]^ae[38]^ae[48];let a=ae[9]^ae[19]^ae[29]^ae[39]^ae[49];let f=h^(r<<1|i>>>31);let u=a^(i<<1|r>>>31);ae[0]^=f;ae[1]^=u;ae[10]^=f;ae[11]^=u;ae[20]^=f;ae[21]^=u;ae[30]^=f;ae[31]^=u;ae[40]^=f;ae[41]^=u;f=e^(n<<1|l>>>31);u=t^(l<<1|n>>>31);ae[2]^=f;ae[3]^=u;ae[12]^=f;ae[13]^=u;ae[22]^=f;ae[23]^=u;ae[32]^=f;ae[33]^=u;ae[42]^=f;ae[43]^=u;f=r^(s<<1|o>>>31);u=i^(o<<1|s>>>31);ae[4]^=f;ae[5]^=u;ae[14]^=f;ae[15]^=u;ae[24]^=f;ae[25]^=u;ae[34]^=f;ae[35]^=u;ae[44]^=f;ae[45]^=u;f=n^(h<<1|a>>>31);u=l^(a<<1|h>>>31);ae[6]^=f;ae[7]^=u;ae[16]^=f;ae[17]^=u;ae[26]^=f;ae[27]^=u;ae[36]^=f;ae[37]^=u;ae[46]^=f;ae[47]^=u;f=s^(e<<1|t>>>31);u=o^(t<<1|e>>>31);ae[8]^=f;ae[9]^=u;ae[18]^=f;ae[19]^=u;ae[28]^=f;ae[29]^=u;ae[38]^=f;ae[39]^=u;ae[48]^=f;ae[49]^=u;let g=ae[0];let c=ae[1];let y=ae[11]<<4|ae[10]>>>28;let d=ae[10]<<4|ae[11]>>>28;let p=ae[20]<<3|ae[21]>>>29;let w=ae[21]<<3|ae[20]>>>29;let b=ae[31]<<9|ae[30]>>>23;let x=ae[30]<<9|ae[31]>>>23;let _=ae[40]<<18|ae[41]>>>14;let m=ae[41]<<18|ae[40]>>>14;let A=ae[2]<<1|ae[3]>>>31;let E=ae[3]<<1|ae[2]>>>31;let k=ae[13]<<12|ae[12]>>>20;let U=ae[12]<<12|ae[13]>>>20;let T=ae[22]<<10|ae[23]>>>22;let v=ae[23]<<10|ae[22]>>>22;let I=ae[33]<<13|ae[32]>>>19;let C=ae[32]<<13|ae[33]>>>19;let R=ae[42]<<2|ae[43]>>>30;let S=ae[43]<<2|ae[42]>>>30;let z=ae[5]<<30|ae[4]>>>2;let B=ae[4]<<30|ae[5]>>>2;let N=ae[14]<<6|ae[15]>>>26;let $=ae[15]<<6|ae[14]>>>26;let L=ae[25]<<11|ae[24]>>>21;let M=ae[24]<<11|ae[25]>>>21;let j=ae[34]<<15|ae[35]>>>17;let W=ae[35]<<15|ae[34]>>>17;let O=ae[45]<<29|ae[44]>>>3;let V=ae[44]<<29|ae[45]>>>3;let q=ae[6]<<28|ae[7]>>>4;let D=ae[7]<<28|ae[6]>>>4;let F=ae[17]<<23|ae[16]>>>9;let G=ae[16]<<23|ae[17]>>>9;let H=ae[26]<<25|ae[27]>>>7;let J=ae[27]<<25|ae[26]>>>7;let K=ae[36]<<21|ae[37]>>>11;let P=ae[37]<<21|ae[36]>>>11;let Q=ae[47]<<24|ae[46]>>>8;let X=ae[46]<<24|ae[47]>>>8;let Y=ae[8]<<27|ae[9]>>>5;let Z=ae[9]<<27|ae[8]>>>5;let ee=ae[18]<<20|ae[19]>>>12;let te=ae[19]<<20|ae[18]>>>12;let re=ae[29]<<7|ae[28]>>>25;let ie=ae[28]<<7|ae[29]>>>25;let ne=ae[38]<<8|ae[39]>>>24;let le=ae[39]<<8|ae[38]>>>24;let se=ae[48]<<14|ae[49]>>>18;let oe=ae[49]<<14|ae[48]>>>18;ae[0]=g^~k&L;ae[1]=c^~U&M;ae[10]=q^~ee&p;ae[11]=D^~te&w;ae[20]=A^~N&H;ae[21]=E^~$&J;ae[30]=Y^~y&T;ae[31]=Z^~d&v;ae[40]=z^~F&re;ae[41]=B^~G&ie;ae[2]=k^~L&K;ae[3]=U^~M&P;ae[12]=ee^~p&I;ae[13]=te^~w&C;ae[22]=N^~H&ne;ae[23]=$^~J&le;ae[32]=y^~T&j;ae[33]=d^~v&W;ae[42]=F^~re&b;ae[43]=G^~ie&x;ae[4]=L^~K&se;ae[5]=M^~P&oe;ae[14]=p^~I&O;ae[15]=w^~C&V;ae[24]=H^~ne&_;ae[25]=J^~le&m;ae[34]=T^~j&Q;ae[35]=v^~W&X;ae[44]=re^~b&R;ae[45]=ie^~x&S;ae[6]=K^~se&g;ae[7]=P^~oe&c;ae[16]=I^~O&q;ae[17]=C^~V&D;ae[26]=ne^~_&A;ae[27]=le^~m&E;ae[36]=j^~Q&Y;ae[37]=W^~X&Z;ae[46]=b^~R&z;ae[47]=x^~S&B;ae[8]=se^~g&k;ae[9]=oe^~c&U;ae[18]=O^~q&ee;ae[19]=V^~D&te;ae[28]=_^~A&N;ae[29]=m^~E&$;ae[38]=Q^~Y&y;ae[39]=X^~Z&d;ae[48]=R^~z&F;ae[49]=S^~B&G;ae[0]^=fe[he];ae[1]^=fe[he+1]}}function h(e){if(typeof e!=="string")throw new TypeError("expected string");if(e.startsWith("0x"))e=e.slice(2);e=e.toLowerCase();if(!/^[a-f0-9]{40}$/.test(e))throw new TypeError("expected 40-char hex");let r=i().update(e).hex;return"0x"+[...e].map((e,t)=>r.charCodeAt(t)>=56?e.toUpperCase():e).join("")}function a(r){if(typeof r==="string"){if(/^(0x)?[a-f0-9]{0,12}$/i.test(r))return parseInt(r,16);r=n(r)}else if(Array.isArray(r)){r=Uint8Array.from(r)}else if(ArrayBuffer.isView(r)){r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}else if(r instanceof ArrayBuffer){r=new Uint8Array(r,0,r.byteLength)}else{throw new TypeError("unknown number to byte conversion")}if(r.length>7){let t=r.length-7;for(let e=0;e<t;e++)if(r[e]>0)throw new RangeError("overflow");r=r.subarray(t)}let t=0;for(let e of r)t=t*256+e;if(!Number.isSafeInteger(t))throw new RangeError("overflow");return t}class f{static from_hex(e){return new this(n(e))}constructor(e){this.buf=e;this.pos=0}get remaining(){return this.buf.length-this.pos}read(e){let{pos:t,buf:r}=this;let i=t+e;if(i>r.length)throw new Error("overflow");let n=r.subarray(t,i);this.pos=i;return n}byte(){let{pos:e,buf:t}=this;if(e>=t.length)throw new Error("overflow");this.pos=e+1;return t[e]}big(e=32){return BigInt("0x"+l(this.read(e)))}number(e=32){return a(this.read(e))}string(){return e(this.memory())}memory(){let e=this.number();let t=e+32;let{buf:r}=this;if(t>r.length)throw new RangeError("overflow");let i=a(r.subarray(e,t));e=t;t+=i;if(t>r.length)throw new RangeError("overflow");return r.subarray(e,t)}addr(e=true){if(this.number(12)!=0)throw new TypeError("expected zero");let t=this.read(20);let r=l(t);return e?h(r):`0x${r}`}uvarint(){let t=0;let r=1;const i=127;while(true){let e=this.byte();t+=(e&127)*r;if(e<=i)break;if(r>70368744177664)throw new RangeException("overflow");r*=128}return t}}function u(n,t){if(typeof t==="number"){if(!Number.isSafeInteger(t))throw new RangeError("overflow");for(let e=n.length-1;t&&e>=0;e--){n[e]=t;t=Math.floor(t/256)}}else if(t instanceof BigInt){let r=t.toString(16);let{length:i}=r;for(let e=n.length-1,t=i;e>=0&&t>0;e--,t-=2){n[e]=parseInt(r.slice(Math.max(0,t-2),t),16)}}else{throw new TypeError(`unknown integer: ${t}`)}}class g{static method(e){if(typeof e!=="string")throw new TypeError("expected string");let t=4;let r=new g(t);if(e.includes("(")){r.add_bytes(i().update(e).bytes.subarray(0,t))}else{r.add_hex(e);if(r.pos!=t)throw new Error("method should be a signature or 8-char hex")}return r}constructor(e=0,t=256){if(!Number.isSafeInteger(t)||t<1)throw new TypeError("expected positive initial capacity");this.buf=new Uint8Array(t);this.pos=0;this.offset=e;this.tails=[]}reset(){this.buf.fill(0);this.tails.length=0;this.pos=0;return this}build_hex(){return"0x"+l(this.build())}build(){let{pos:i,tails:n,offset:l}=this;let e=n.reduce((e,[t,r])=>r.length,0);if(e>0){this.alloc(e);let{buf:r}=this;for(let[e,t]of n){u(r.subarray(e,e+32),i-l);r.set(t,i);i+=t.length}}return this.buf.subarray(0,i)}alloc(t){if(typeof t!=="number"||t<1)throw new TypeError("expected positive size");let{buf:r,pos:e}=this;let i=e+t;if(i>r.length){let e=new Uint8Array(Math.max(r.length+t,r.length<<1));e.set(r);this.buf=r=e}this.pos=i;return r.subarray(e,i)}big(e,t=32){let r=n(e.toString(16));if(r.length>t)r=r.subarray(r.length-t);this.alloc(t).set(r,t-r.length);return this}number(e,t=32){u(this.alloc(t),e);return this}string(e){return this.memory(s(e))}memory(e){let{pos:t}=this;this.alloc(32);let r=new Uint8Array(e.length+63&~31);u(r.subarray(0,32),e.length);r.set(e,32);this.tails.push([t,r]);return this}addr(e){let t=n(e);if(t.length!=20)throw new TypeError("expected address");this.alloc(32).set(t,12);return this}add_hex(e){return this.add_bytes(n(e))}add_bytes(e){if(!(e instanceof Uint8Array)){if(e instanceof ArrayBuffer){e=new Uint8Array(e)}else if(Array.isArray(e)){e=Uint8Array.from(e)}else if(typeof e==="string"){e=s(e)}else{throw new TypeError("expected bytes")}}this.alloc(e.length).set(e);return this}}export{f as ABIDecoder,g as ABIEncoder,a as number_from_abi};