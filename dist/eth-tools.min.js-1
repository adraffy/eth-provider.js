function e(e=256){return new c(e,1)}function t(e=256){return new c(e,6)}function r(e){return new h(e,31)}function s(e){return[...e].map((e=>e.toString(16).padStart(2,"0"))).join("")}function i(e){if("string"!=typeof e)throw TypeError("expected string");e.startsWith("0x")&&(e=e.slice(2)),1&e.length&&(e=`0${e}`);let t=e.length>>1,r=new Uint8Array(t);for(let s=0,i=0;s<t;s++){let t=parseInt(e.slice(i,i+=2),16);if(Number.isNaN(t))throw new TypeError("expected hex byte");r[s]=t}return r}function n(e){if("string"!=typeof e)throw TypeError("expected string");try{e=unescape(encodeURIComponent(e))}catch(e){throw new Error("malformed utf8",{cause:e})}let{length:t}=e,r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e.charCodeAt(s);return r}function o(e){try{return decodeURIComponent(escape(String.fromCharCode(...e)))}catch(e){throw new Error("malformed utf8",{cause:e})}}class a{constructor(e,t){const r=1600;if(31&e)throw new Error("capacity % 32 != 0");if(e<0||e>=r)throw new Error("capacity must be [0,1600)");this.sponge=Array(50).fill(0),this.block_count=r-e>>5,this.block_index=0,this.suffix=t,this.ragged_block=0,this.ragged_shift=0}update(e){if(!(e instanceof Uint8Array))if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(Array.isArray(e))e=Uint8Array.from(e);else{if("string"!=typeof e)throw new TypeError("expected bytes");e=n(e)}let t=0,r=e.length;if(this.ragged_shift>0&&(t=this._add_ragged(e,0),t==r))return this;let{sponge:s,block_index:i,block_count:o}=this;for(;t+4<=r;t+=4)s[i++]^=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,i==o&&(u(s),i=0);return this.block_index=i,t<r&&this._add_ragged(e,t),this}_add_ragged(e,t){let{ragged_shift:r,ragged_block:s}=this,i=0;for(;t<e.length&&r<32;i++,t++,r+=8)s|=e[t]<<r;return 32==r&&(this._add_block(s),r=0,s=0),this.ragged_block=s,this.ragged_shift=r,i}_add_block(e){let{sponge:t,block_index:r,block_count:s}=this;t[r++]^=e,r==s&&(u(t),r=0),this.block_index=r}finalize(){let{sponge:e,suffix:t,ragged_shift:r,block_index:s,block_count:i}=this;if(r){if(-1==r)return;t=this.ragged_block|t<<r}e[s]^=t,e[i-1]^=2147483648,u(e),this.ragged_shift=-1}}class h extends a{constructor(e,t){super(e<<1,t),this.size0=e>>2,this.byte_offset=0}hex(e){return s(this.bytes(e))}bytes(e){this.finalize(),e||(e=this.size0);let{sponge:t,byte_offset:r,block_count:s}=this,i=3&r,n=(i>0)+(e+3>>2),o=new Int32Array(n),a=(r>>2)%s;for(let e=0;e<n;e++)o[e]=t[a++],a==s&&(u(t),a=0);return this.byte_offset=r+e,new Uint8Array(o.buffer,i,e)}}class c extends a{constructor(e,t){super(e<<1,t),this.size=e>>5}get hex(){return s(this.bytes)}get bytes(){this.finalize();let{size:e,sponge:t}=this,r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=t[s];return new Uint8Array(r.buffer)}}const l=[1,0,32898,0,32906,-2147483648,-2147450880,-2147483648,32907,0,-2147483647,0,-2147450751,-2147483648,32777,-2147483648,138,0,136,0,-2147450871,0,-2147483638,0,-2147450741,0,139,-2147483648,32905,-2147483648,32771,-2147483648,32770,-2147483648,128,-2147483648,32778,0,-2147483638,-2147483648,-2147450751,-2147483648,32896,-2147483648,-2147483647,0,-2147450872,-2147483648];function u(e){for(let t=0;t<48;t+=2){let r=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],n=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],h=e[6]^e[16]^e[26]^e[36]^e[46],c=e[7]^e[17]^e[27]^e[37]^e[47],u=e[8]^e[18]^e[28]^e[38]^e[48],d=e[9]^e[19]^e[29]^e[39]^e[49],f=u^(i<<1|n>>>31),w=d^(n<<1|i>>>31);e[0]^=f,e[1]^=w,e[10]^=f,e[11]^=w,e[20]^=f,e[21]^=w,e[30]^=f,e[31]^=w,e[40]^=f,e[41]^=w,f=r^(o<<1|a>>>31),w=s^(a<<1|o>>>31),e[2]^=f,e[3]^=w,e[12]^=f,e[13]^=w,e[22]^=f,e[23]^=w,e[32]^=f,e[33]^=w,e[42]^=f,e[43]^=w,f=i^(h<<1|c>>>31),w=n^(c<<1|h>>>31),e[4]^=f,e[5]^=w,e[14]^=f,e[15]^=w,e[24]^=f,e[25]^=w,e[34]^=f,e[35]^=w,e[44]^=f,e[45]^=w,f=o^(u<<1|d>>>31),w=a^(d<<1|u>>>31),e[6]^=f,e[7]^=w,e[16]^=f,e[17]^=w,e[26]^=f,e[27]^=w,e[36]^=f,e[37]^=w,e[46]^=f,e[47]^=w,f=h^(r<<1|s>>>31),w=c^(s<<1|r>>>31),e[8]^=f,e[9]^=w,e[18]^=f,e[19]^=w,e[28]^=f,e[29]^=w,e[38]^=f,e[39]^=w,e[48]^=f,e[49]^=w;let _=e[0],p=e[1],y=e[11]<<4|e[10]>>>28,m=e[10]<<4|e[11]>>>28,g=e[20]<<3|e[21]>>>29,b=e[21]<<3|e[20]>>>29,v=e[31]<<9|e[30]>>>23,E=e[30]<<9|e[31]>>>23,x=e[40]<<18|e[41]>>>14,T=e[41]<<18|e[40]>>>14,A=e[2]<<1|e[3]>>>31,k=e[3]<<1|e[2]>>>31,$=e[13]<<12|e[12]>>>20,U=e[12]<<12|e[13]>>>20,C=e[22]<<10|e[23]>>>22,I=e[23]<<10|e[22]>>>22,S=e[33]<<13|e[32]>>>19,P=e[32]<<13|e[33]>>>19,q=e[42]<<2|e[43]>>>30,N=e[43]<<2|e[42]>>>30,R=e[5]<<30|e[4]>>>2,O=e[4]<<30|e[5]>>>2,j=e[14]<<6|e[15]>>>26,z=e[15]<<6|e[14]>>>26,L=e[25]<<11|e[24]>>>21,M=e[24]<<11|e[25]>>>21,B=e[34]<<15|e[35]>>>17,Y=e[35]<<15|e[34]>>>17,D=e[45]<<29|e[44]>>>3,V=e[44]<<29|e[45]>>>3,F=e[6]<<28|e[7]>>>4,W=e[7]<<28|e[6]>>>4,J=e[17]<<23|e[16]>>>9,G=e[16]<<23|e[17]>>>9,X=e[26]<<25|e[27]>>>7,H=e[27]<<25|e[26]>>>7,K=e[36]<<21|e[37]>>>11,Q=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,te=e[8]<<27|e[9]>>>5,re=e[9]<<27|e[8]>>>5,se=e[18]<<20|e[19]>>>12,ie=e[19]<<20|e[18]>>>12,ne=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,ae=e[38]<<8|e[39]>>>24,he=e[39]<<8|e[38]>>>24,ce=e[48]<<14|e[49]>>>18,le=e[49]<<14|e[48]>>>18;e[0]=_^~$&L,e[1]=p^~U&M,e[10]=F^~se&g,e[11]=W^~ie&b,e[20]=A^~j&X,e[21]=k^~z&H,e[30]=te^~y&C,e[31]=re^~m&I,e[40]=R^~J&ne,e[41]=O^~G&oe,e[2]=$^~L&K,e[3]=U^~M&Q,e[12]=se^~g&S,e[13]=ie^~b&P,e[22]=j^~X&ae,e[23]=z^~H&he,e[32]=y^~C&B,e[33]=m^~I&Y,e[42]=J^~ne&v,e[43]=G^~oe&E,e[4]=L^~K&ce,e[5]=M^~Q&le,e[14]=g^~S&D,e[15]=b^~P&V,e[24]=X^~ae&x,e[25]=H^~he&T,e[34]=C^~B&Z,e[35]=I^~Y&ee,e[44]=ne^~v&q,e[45]=oe^~E&N,e[6]=K^~ce&_,e[7]=Q^~le&p,e[16]=S^~D&F,e[17]=P^~V&W,e[26]=ae^~x&A,e[27]=he^~T&k,e[36]=B^~Z&te,e[37]=Y^~ee&re,e[46]=v^~q&R,e[47]=E^~N&O,e[8]=ce^~_&$,e[9]=le^~p&U,e[18]=D^~F&se,e[19]=V^~W&ie,e[28]=x^~A&j,e[29]=T^~k&z,e[38]=Z^~te&y,e[39]=ee^~re&m,e[48]=q^~R&J,e[49]=N^~O&G,e[0]^=l[t],e[1]^=l[t+1]}}function d(e,t){let r=e.length,s=r-t.length;for(let i=0;0==s&&i<r;i++)s=e[i]-t[i];return s}function f(e,t,r){return e[t]=r,r.then((r=>(e[t]=r,r))).catch((r=>{throw delete e[t],r}))}function w(e){return"data:application/json;base64,"+btoa(JSON.stringify(e))}function _(e){return/^(0x)?[0]+$/i.test(e)}function p(e){return e.replace(/^ipfs:\/\//i,"https://dweb.link/ipfs/")}const y="0x0000000000000000000000000000000000000000";function m(t,r=!0){if("string"!=typeof t)throw new TypeError("expected string");t.startsWith("0x")&&(t=t.slice(2));let s=t.toLowerCase();if(!/^[a-f0-9]{40}$/.test(s))throw new TypeError("expected 40-char hex");let i=s;if(r&&!/^[0-9]+$/.test(i)){let r=e().update(s).hex;if(i=[...s].map(((e,t)=>r.charCodeAt(t)>=56?e.toUpperCase():e)).join(""),t!==i&&t!==s&&t!==s.toLowerCase())throw new Error(`checksum failed: ${t}`)}return`0x${i}`}function g(e){return/^(0x)?[a-f0-9]{40}$/i.test(e)}function b(e){try{return m(e)===e}catch(e){}}function v(e){return(e=m(e)).slice(0,6)+".."+e.slice(-4)}function E(e){let t=e<0?~e:255-e;if(t<0||t>=256)throw new TypeError(`invalid bit index: ${e}`);return[t>>3,128>>(7&t)]}class T{static wrap(e){if(e instanceof T)return e;if(e instanceof Uint8Array)return new this($(e,32,!1));if(Number.isSafeInteger(e))return this.from_number(e);if("string"==typeof e)return this.from_str(e);throw new TypeError(`not Uint256-like: ${e}`)}static zero(){return new this(new Uint8Array(32))}static from_number(e){return this.zero().set_number(e)}static from_bytes(e){return new this($(e,32))}static from_str(e){return e.startsWith("0x")?this.from_hex(e):this.from_dec(e)}static from_hex(e){return this.from_bytes(i(e))}static from_dec(e){if(!/^[0-9]+$/.test(e))throw new TypeError(`expected decimal digits: ${e}`);let t=e.length;t<10&&this.from_number(parseInt(e,10));let r=new Uint8Array(Math.max(32,t)),s=0;for(let i=0;i<t;i++){let t=e.charCodeAt(i)-48;for(let e=0;e<s;e++)t+=10*r[e],r[e]=t,t>>=8;for(;t>0;)r[s++]=t,t>>=8}for(let e=Math.min(s,15);e>=0;e--){let t=31-e,s=r[e];r[e]=r[t],r[t]=s}return new this(r.slice(0,32))}constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("expected bytes");if(32!=e.length)throw new TypeError("expected 32 bytes");this.bytes=e}clone(){return new this.constructor(this.bytes.slice())}compare(e){return d(this.bytes,this.constructor.wrap(e).bytes)}set_number(e){return k(this.bytes,e),this}add(e){let t=this.constructor.wrap(e).bytes,{bytes:r}=this,s=0;for(let e=31;e>=0;e--){let i=r[e]+t[e]+s;r[e]=i,s=i>>8}return this}apply_bytewise_binary_op(e,t){let r=this.constructor.wrap(t).bytes;return this.bytes.forEach(((t,s,i)=>i[s]=e(t,r[s]))),this}bytewise_fill(e){return this.bytes.fill(e),this}or(e){return this.apply_bytewise_binary_op(((e,t)=>e|t),e)}and(e){return this.apply_bytewise_binary_op(((e,t)=>e&t),e)}xor(e){return this.apply_bytewise_binary_op(((e,t)=>e^t),e)}not(){return this.bytes.forEach(((e,t,r)=>r[t]=~e)),this}set_bit(e,t=!0){let[r,s]=E(e);return t?this.bytes[r]|=s:this.bytes[r]&=~s,this}flip_bit(e){let[t,r]=E(e);return this.bytes[t]^=r,this}test_bit(e){let[t,r]=E(e);return(this.bytes[t]&r)>0}get number(){let{bytes:e}=this;return 255==e[0]?-(1+A(e.map((e=>~e)))):A(e)}get gwei(){return this.as_float(-9)}get ether(){return this.as_float(-18)}get unsigned(){return A(this.bytes)}get hex(){return"0x"+s(this.bytes)}get min_hex(){return"0x"+this.digit_str(16)}get bin(){return"0b"+this.digit_str(2)}get dec(){return this.digit_str(10)}digit_str(e,t="0123456789abcdefghjiklmnopqrstuvwxyz"){if(e>t.length)throw new RangeError(`radix larger than lookup: ${x}`);return this.digits(e).map((e=>t[e])).join("")}digits(e){if(e<2)throw new RangeError(`base must be 2 or more: ${e}`);let t=[0];for(let r of this.bytes){for(let s=0;s<t.length;++s){let i=t[s]<<8|r;t[s]=i%e,r=i/e|0}for(;r>0;)t.push(r%e),r=r/e|0}return t.reverse()}set_digits(e,t){let r=[];for(let s of t){if(s<0||s>=e)throw new RangeError(`expected base ${e} digit: ${s}`);for(let t=0;t<r.length;t++)s+=r[t]*e,r[t]=s,s>>=8;for(;s>0;)r.push(s),s>>=8}let s=r.length-32;return s>0?this.bytes.set(t.slice(s)):(this.bytes.fill(0,-s),this.bytes.set(t,32+s)),this}as_float(e,t=10){let r=this.digits(t),s=0;for(let i=0,n=r.length-1;i<=n;i++)s+=r[n-i]*t**(i+e);return s}toJSON(){return this.min_hex}toString(){return`Uint256(${this.min_hex})`}}function A(e){if(e.length>7){let t=e.length-7;for(let r=0;r<t;r++)if(e[r]>0)throw new RangeError("overflow");e=e.subarray(t)}let t=0;for(let r of e)t=256*t+r;if(!Number.isSafeInteger(t))throw new RangeError("overflow");return t}function k(e,t){if(!Number.isSafeInteger(t))throw new RangeError(`expected integer: ${t}`);if(t<0){t=-(t+1);for(let r=e.length-1;r>=0;r--)e[r]=~(255&t),t=Math.floor(t/256)}else for(let r=e.length-1;r>=0;r--)e[r]=255&t,t=Math.floor(t/256)}function $(e,t,r=!0){let{length:s}=e;if(s==t)return r?e.slice():e;if(s>t)return e.slice(t-s);let i=new Uint8Array(t);return i.set(e,t-s),i}class U{static from_hex(e){return new this(i(e))}constructor(e){this.buf=e,this.pos=0}get remaining(){return this.buf.length-this.pos}read_bytes(e){let{pos:t,buf:r}=this,s=t+e;if(s>r.length)throw new RangeError("buffer overflow");let i=r.subarray(t,s);return this.pos=s,i}read_memory(){let e=this.number(),t=e+32,{buf:r}=this;if(t>r.length)throw new RangeError("buffer overflow");let s=A(r.subarray(e,t));if(e=t,t+=s,t>r.length)throw new RangeError("buffer overflow");return r.subarray(e,t)}peek_byte(e=0){let{pos:t,buf:r}=this;if(t+=e,!(t>=0&&t<r.length))throw new RangeError(`invalid offset: ${e}`);return r[t]}read_byte(){let{pos:e,buf:t}=this;if(e>=t.length)throw new RangeError("buffer overflow");return this.pos=e+1,t[e]}read_addr_bytes(){if(this.read_bytes(12).some((e=>e>0)))throw new TypeError("invalid address: expected zero");return this.read_bytes(20)}bytes(e){return this.read_bytes(e).slice()}boolean(){return this.number()>0}number(e=32){return A(this.read_bytes(e))}uint256(){return new T(this.bytes(32))}string(){return o(this.read_memory())}memory(){return this.read_memory().slice()}addr(e=!0){let t=s(this.read_addr_bytes());return e?m(t):`0x${t}`}uvarint(){let e=0,t=1;for(;;){let r=this.read_byte();if(e+=(127&r)*t,r<=127)break;if(t>70368744177664)throw new RangeException("overflow");t*=128}return e}}const C={};function I(e){return/^0x[0-9a-fA-F]{8}$/.test(e)?e:s(S(e))}function S(t){if("string"==typeof t&&t.includes("(")){let r=C[t];return r||(C[t]=r=e().update(t).bytes.subarray(0,4)),r.slice()}try{let e=t instanceof Uint8Array?t:i(t);if(4!=e.length)throw new Error("expected 4 bytes");return e}catch(e){throw new Error(`method ${t} should be a signature or 8-char hex`)}}class P{static method(e){return new P(4).add_bytes(S(e))}constructor(e=0,t=256){if(!Number.isSafeInteger(t)||t<1)throw new TypeError("expected positive initial capacity");this.buf=new Uint8Array(t),this.pos=0,this.offset=e,this.tails=[]}reset(){return this.buf.fill(0),this.tails.length=0,this.pos=0,this}build_hex(){return"0x"+s(this.build())}build(){let{pos:e,tails:t,offset:r}=this,s=t.reduce(((e,[t,r])=>r.length),0);if(s>0){this.alloc(s);let{buf:i}=this;for(let[s,n]of t)k(i.subarray(s,s+32),e-r),i.set(n,e),e+=n.length}return this.buf.subarray(0,e)}alloc(e){if(!Number.isSafeInteger(e)||e<1)throw new TypeError("expected positive size");let{buf:t,pos:r}=this,s=r+e;if(s>t.length){let r=new Uint8Array(Math.max(t.length+e,t.length<<1));r.set(t),this.buf=t=r}return this.pos=s,t.subarray(r,s)}bytes_hex(e){return this.bytes(i(e))}bytes(e){return this.alloc(e.length+31&-32).set(e),this}number(e,t=32){if(e instanceof T){let r=this.alloc(t);t<32?r.set(e.bytes.subarray(32-t)):r.set(e.bytes,t-32)}else k(this.alloc(t),e);return this}method(e){return this.bytes(S(e))}string(e){return this.memory(n(e))}memory(e){let{pos:t}=this;this.alloc(32);let r=new Uint8Array(e.length+63&-32);return k(r.subarray(0,32),e.length),r.set(e,32),this.tails.push([t,r]),this}addr(e){let t=i(e);if(20!=t.length)throw new TypeError("expected address");return this.alloc(32).set(t,12),this}add_hex(e){return this.add_bytes(i(e))}add_bytes(e){if(!(e instanceof Uint8Array))if(e instanceof ArrayBuffer)e=new Uint8Array(e);else{if(!Array.isArray(e))throw new TypeError("expected bytes");e=Uint8Array.from(e)}return this.alloc(e.length).set(e),this}}class q{bytes_from_str(e){if("string"!=typeof e)throw new TypeError("expected string");return this.bytes(e)}str_from_bytes(e){if(Array.isArray(e)&&(e=Uint8Array.from(e)),!(e instanceof Uint8Array))throw new TypeError("expected bytes");return this.str(e)}bytes(){throw new TypeError("bug: not implemented")}str(){throw new TypeError("bug: not implemented")}}class N extends q{constructor(e,t){super(),this.coder=e,this.fn=t}bytes(e){return this.coder.bytes(this.fn(e,!0))}str(e){return this.fn(this.coder.str(e),!1)}}class R extends q{constructor(e,t){super(),this.coder=e,this.fn=t}bytes(e){return this.fn(this.coder.bytes(e,!0))}str(e){return this.coder.str(this.fn(e,!1))}}class O extends q{constructor(e){super();let t=[...e];if(t.length!==e.length)throw new TypeError("expected UTF16");this.lookup=e,this.map=Object.fromEntries(t.map(((e,t)=>[e,t])))}parse(e){let t=this.map[e];if(void 0===t)throw new TypeError(`invalid digit ${e}`);return t}format(e){return e.reduce(((e,t)=>e+this.lookup[t]),"")}}function j(e,t,r,s){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new TypeError("expected array");if(!Number.isSafeInteger(t)||t<1||t>32)throw new TypeError("invalid from bits");if(!Number.isSafeInteger(r)||r<1||r>32)throw new TypeError("invalid to bits");let i=0,n=0,o=[],a=(1<<r)-1;for(let s of e){if(s<0||s>>t!=0)throw new Error("invalid digit");for(i=i<<t|s,n+=t;n>=r;)n-=r,o.push(i>>n&a)}if(s)n>0&&o.push(i<<r-n&a);else if(n>=t||i<<r-n&a)throw new Error("malformed");return Uint8Array.from(o)}class z extends O{bytes(e){let{lookup:t}=this,r=t.length,s=e.length,i=new Uint8Array(s),n=0;for(let t of e){let e=this.parse(t);for(let t=0;t<n;t++)e+=i[t]*r,i[t]=e,e>>=8;for(;e>0;)i[n++]=e,e>>=8}for(let r=0;r<s&&e[r]===t[0];r++)n++;return i.subarray(0,n).reverse()}str(e){let t=this.lookup.length,r=[];for(let s of e){for(let e=0;e<r.length;++e){let i=r[e]<<8|s;r[e]=i%t,s=i/t|0}for(;s>0;)r.push(s%t),s=s/t|0}for(let t=0;t<e.length&&0==e[t];t++)r.push(0);return this.format(r.reverse())}}class L extends O{constructor(e,t){super(e),this.w=t}bytes(e,t){let{w:r}=this,s=e.length,i=0,n=0,o=0;for(;t&&s>0&&"="==e[s-1];)--s;let a=new Uint8Array(s*r>>3);for(let t=0;t<s;t++)n=n<<r|this.parse(e[t]),o+=r,o>=8&&(a[i++]=n>>(o-=8)&255);if(n<<8-o&255)throw new Error("wtf");return a}str(e,t){let{w:r,lookup:s}=this,i=(1<<r)-1,n=0,o=0,a="",h=e.length;for(let t=0;t<h;t++)for(n=n<<8|e[t],o+=8;o>=r;)a+=s[n>>(o-=r)&i];for(o&&(a+=s[n<<r-o&i]);t&&a.length*r&7;)a+="=";return a}}const M=new z("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),B="abcdefghijklmnopqrstuvwxyz",Y="0123456789"+B,D=new L(B.toUpperCase()+B+Y.slice(0,10)+"+=",6),V=new L(B.toUpperCase()+B+Y.slice(0,10)+"-_",6),F=new z(Y),W=new L(Y.slice(0,32),5),J=new L("abcdefghijklmnopqrstuvwxyz234567",5),G=new L(Y.slice(0,16),4),X=new z(Y.slice(0,10)),H=new L(Y.slice(0,8),3),K=new L(Y.slice(0,2),1);function Q(e,...t){return{decode:r=>e.bytes(r,...t),encode:r=>e.str_from_bytes(r,...t)}}const Z={0:{...Q(K),name:"base2"},7:{...Q(H),name:"base8"},9:{...Q(X),name:"base10"},f:{...Q(G),case:!1,name:"base16"},F:{...Q(G),case:!0,name:"base16upper"},v:{...Q(W),case:!1,name:"base32hex"},V:{...Q(W),case:!0,name:"base32hexupper"},t:{...Q(W,!0),case:!1,name:"base32hexpad"},T:{...Q(W,!0),case:!0,name:"base32hexpadupper"},b:{...Q(J),case:!1,name:"base32"},B:{...Q(J),case:!0,name:"base32upper"},c:{...Q(J,!0),case:!1,name:"base32pad"},C:{...Q(J,!0),case:!0,name:"base32padupper"},k:{...Q(F),case:!1,name:"base36"},K:{...Q(F),case:!0,name:"base36upper"},z:{...Q(M),name:"base58btc"},m:{...Q(D),name:"base64"},M:{...Q(D,!0),name:"base64pad"},u:{...Q(V),name:"base64url"},U:{...Q(V,!0),name:"base64urlpad"},1:{...Q(M),name:"base58btc-Identity"},Q:{...Q(M),name:"base58btc-CIDv0"}};for(let[e,t]of Object.entries(Z))t.prefix=e,Z[t.name]=t;function ee(e,t){if("string"!=typeof e)throw new TypeError("expected string");t||(t=e[0],e=e.slice(1));let r=Z[t];if(!r)throw new Error(`Unknown multibase: ${t}`);return void 0!==r.case&&(e=e.toLowerCase()),r.decode(e)}function te(e,t,r=!0){let s=Z[e];if(!s)throw new Error(`Unknown multibase: ${e}`);let i=s.encode(t);return s.case&&(i=i.toUpperCase()),r&&(i=s.prefix+i),i}const re=(()=>{let e=1;for(;;){let t=128*e;if(!Number.isSafeInteger(t))break;e=t}return e})();function se(e){if(!Number.isSafeInteger(e)||e<0)throw new TypeError(`expected uvarint: ${e}`)}function ie(e){se(e);let t=1;for(;e>=128;t++)e=Math.floor(e/128);return t}function ne(e,t=0){if(!ArrayBuffer.isView(e))throw new TypeError("expected ArrayBufferView");let r=0,s=1;for(;;){if(t>=e.length)throw new RangeError("buffer overflow");let i=e[t++];if(r+=(127&i)*s,0==(128&i))break;if(s==re)throw new RangeError("uvarint overflow");s*=128}return[r,e.subarray(t)]}function oe(e,t,r=0){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new TypeError("expected ArrayLike");for(se(t);;){if(r>=e.length)throw new RangeError("buffer overflow");if(t<128)break;e[r++]=127&t|128,t=Math.floor(t/128)}return e[r++]=t,r}class ae{static from_str(e){return this.from_bytes(ee(e))}static from_bytes(e){let t,r;if([t,e]=ne(e),[r,e]=ne(e),e.length!==r)throw new Error(`expected ${r}, got ${e.length} bytes`);return new this(t,e.slice())}constructor(e,t){this.code=e,this.hash=t}get length(){return ie(this.code)+ie(this.hash.length)+this.hash.length}get bytes(){let e=new Uint8Array(this.length);return this.write_bytes(e,0),e}write_bytes(e,t=0){return t=oe(e,this.code,t),t=oe(e,this.hash.length,t),e.set(this.hash,t),t}toJSON(){return{code:this.code,hash:this.hash}}}class he{static from_str(e){if("string"!=typeof e)throw new TypeError("expected string");if(46==e.length&&e.startsWith("Qm"))return this.from_bytes(M.bytes_from_str(e));{let t=ee(e);if(18==t[0])throw new Error(`CIDv0 cannot be multibase: ${e}`);return this.from_bytes(t)}}static from_bytes(e){if(!(e instanceof Uint8Array))throw new TypeError("expected Uint8Array");try{if(34==e.length&&18==e[0]&&32==e[1])return new ce(ae.from_bytes(e));let t;if([t,e]=ne(e),1===t){let t;return[t,e]=ne(e),new le(t,ae.from_bytes(e))}throw new Error(`unsupported version: ${t}`)}catch(e){throw new Error(`Malformed CID: ${e}`,{cause:e})}}upgrade_v0(){return this}toJSON(){return{version:this.version,codec:this.codec,hash:this.hash}}}class ce extends he{constructor(e){super(),this.hash=e}get version(){return 0}get codec(){return 112}get length(){return this.hash.bytes.length}get bytes(){return this.hash.bytes}upgrade_v0(){return new le(this.codec,this.hash)}toString(e){if(void 0!==e&&"Q"!==e)throw new TypeError("expected base Q");return te("Q",this.bytes,!1)}}class le extends he{constructor(e,t){super(),this.codec=e,this.hash=t}get version(){return 1}get length(){return ie(this.version)+ie(this.codec)+this.hash.length}get bytes(){let e=new Uint8Array(this.length),t=0;return t=oe(e,this.version,t),t=oe(e,this.codec,t),this.hash.write_bytes(e,t),e}toString(e){if(void 0===e)if(114===this.codec)e="k";else e="b";return te(e,this.bytes,!0)}}const ue=new O("qpzry9x8gf2tvdw0s3jn54khce6mua7l",5),de=[996825010,642813549,513874426,1027748829,705979059];function fe(e,t=1){for(let r of e){let e=t>>25;t=(33554431&t)<<5^r;for(let r=0;r<5;r++)e>>r&1&&(t^=de[r])}return t}function we(e){let t=e.length,r=Array(t);r.push(0);for(let s=0;s<t;s++){let t=e.charCodeAt(s);if(t<33||t>126)throw new Error(`invalid hrp character: ${t}`);r[s]=t>>5,r.push(31&t)}return r}class _e extends q{constructor(e,t){pe.assert_hrp(t),super(),this.type=e,this.hrp=t}bytes(e){let t=pe.from_str(e);if(t.type!=this.type)throw new Error("expected ");if(t.hrp!==this.hrp)throw new Error("invalid hrp");return pe.bytes_from_digits(t.digits)}str(e){return new pe(this.type,this.hrp,pe.digits_from_bytes(e)).toString()}}class pe{static TYPE_1=1;static TYPE_M=734539939;static assert_type(e){switch(e){case this.TYPE_1:case this.TYPE_M:break;default:throw new TypeError(`unknown bech32 type: ${e}`)}}static assert_hrp(e){if("string"!=typeof e||!e||e!==e.toLowerCase())throw new TypeError("expected lower-case hrp")}static bytes_from_digits(e){return j(e,5,8,!1)}static digits_from_bytes(e){return j(e,8,5,!0)}static from_str(e){if("string"!=typeof e)throw new TypeError("expected string");try{if(e.length>90)throw new Error("too long");let t=e.toLowerCase();if(e!==t&&e!==e.toUpperCase())throw new Error("mixed case");let r=t.lastIndexOf("1");if(r<1)throw new Error("expected hrp");if(t.length-(r+1)<6)throw new Error("expected checksum");let s=t.slice(0,r),i=Uint8Array.from([...t.slice(r+1)].map((e=>ue.parse(e))));return new this(fe(i,fe(we(s))),s,i.slice(0,-6))}catch(e){throw new Error(`Invalid Bech32: ${e.message}`,{cause:e})}}constructor(e,t,r){if(this.constructor.assert_type(e),this.constructor.assert_hrp(t),!(r instanceof Uint8Array))throw new TypeError("expected Uint8Array");this.type=e,this.hrp=t,this.digits=r}toString(){let{hrp:e,digits:t}=this,r=[0,0,0,0,0,0],s=fe(r,fe(t,fe(we(e))))^this.type;for(let e=0;e<r.length;e++)r[e]=s>>5*(5-e)&31;return this.hrp+"1"+ue.format(t)+ue.format(r)}}class ye extends q{constructor(e){pe.assert_hrp(e),super(),this.hrp=e}str(e){return me.from_bytes(this.hrp,e).toString()}bytes(e){let t=me.from_str(e);if(t.hrp!==this.hrp)throw new Error("invalid hrp");return t.bytes}}class me{static from_bech32(e){if(!(e instanceof pe))throw new TypeError("expected bech32");if(e.digits.length<1)throw new Error("no digits");let t=e.digits[0];if(t>16)throw new Error(`invalid version: ${t}`);let r=pe.bytes_from_digits(e.digits.slice(1));if(0==t){if(20!=r.length&&32!=r.length)throw new Error("invalid length");if(e.type!==pe.TYPE_1)throw new Error("expected Bech32")}else if(e.type!==pe.TYPE_M)throw new Error("expected Bech32m");return new this(e.hrp,t,r)}static from_str(e){try{return this.from_bech32(pe.from_str(e))}catch(e){throw new Error(`Invalid segwit string: ${e.message}`,{cause:e})}}static from_bytes(e,t){if(!(t instanceof Uint8Array))throw new TypeError("expected bytes");pe.assert_hrp(e);try{let r=t[0];if(r>80&&(r-=80),r>16)throw new Error(`invalid version: ${r}`);if(t.length!==t[1]+2)throw new Error("invalid length");return new this(e,r,t.slice(2))}catch(e){throw new Error(`Invalid segwit bytes: ${e.message}`,{cause:e})}}constructor(e,t,r){this.hrp=e,this.version=t,this.program=r}get bytes(){let{version:e,program:t}=this,r=new Uint8Array(2+t.length);return r[0]=e>0?e+80:e,r[1]=t.length,r.set(t,2),r}get bech32(){let{hrp:e,version:t,program:r}=this,s=pe.digits_from_bytes(r),i=new Uint8Array(1+s.length);return i[0]=t,i.set(s,1),new pe(0==t?pe.TYPE_1:pe.TYPE_M,e,i)}toString(){return this.bech32.toString()}}function ge(){return new be}class be{constructor(){this.words=Array(64),this.block=void 0,this.index=0,this.wrote=0,this.state=Int32Array.of(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225)}update(e){if(!(e instanceof Uint8Array))if(e instanceof ArrayBuffer)e=new Uint8Array(e);else if(Array.isArray(e))e=Uint8Array.from(e);else{if("string"!=typeof e)throw new TypeError("expected bytes");{let t;try{t=unescape(encodeURIComponent(e))}catch(e){throw new Error("malformed utf8",{cause:e})}let r=t.length;e=new Uint8Array(r);for(let s=0;s<r;s++)e[s]=t.charCodeAt(s)}}let{block:t,index:r,wrote:s}=this;if(s<0)throw new Error("already finalized");let i=e.length;for(this.wrote=s+i;;){let s=64-r;if(i<s)break;0==r?this._update(e.subarray(0,s)):(t.set(e.subarray(0,s),r),this._update(t)),e=e.subarray(s),i-=s,r=0}return i>0&&(t||(this.block=t=new Uint8Array(64)),t.set(e,r),r+=i),this.index=r,this}get hex(){return[...this.bytes].map((e=>e.toString(16).padStart(2,"0"))).join("")}get bytes(){if(this.wrote>=0){let{block:e,index:t,wrote:r}=this;e||(e=new Uint8Array(64)),e[t]=128,e.fill(0,t+1),t>=56&&(this._update(e),e.fill(0)),r*=8;let s=4294967296;if(r>=s){let t=r/s|0;e[56]=t>>24,e[57]=t>>16,e[58]=t>>8,e[59]=t}e[60]=r>>24,e[61]=r>>16,e[62]=r>>8,e[63]=r,this._update(e),this.wrote=-1}let e=new Uint8Array(32),{state:t}=this,r=0;for(let s of t)e[r++]=s>>24,e[r++]=s>>16,e[r++]=s>>8,e[r++]=s;return e}_update(e){let{state:t,words:r}=this;for(let t=0;t<64;t+=4)r[t>>2]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];for(let e=16;e<64;e++)r[e]=ke(r[e-2])+r[e-7]+Ae(r[e-15])+r[e-16]|0;let[s,i,n,o,a,h,c,l]=t;for(let e=0;e<64;e++){let t=l+Te(a)+ve(a,h,c)+$e[e]+r[e]|0,u=xe(s)+Ee(s,i,n)|0;l=c,c=h,h=a,a=o+t|0,o=n,n=i,i=s,s=t+u|0}t[0]+=s,t[1]+=i,t[2]+=n,t[3]+=o,t[4]+=a,t[5]+=h,t[6]+=c,t[7]+=l}}function ve(e,t,r){return r^e&(t^r)}function Ee(e,t,r){return e&t|r&(e|t)}function xe(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function Te(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function Ae(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function ke(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}const $e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ue(e){return e=ge().update(e).bytes,(e=ge().update(e).bytes).slice(0,4)}const Ce=new class extends q{bytes(e){let t=M.bytes_from_str(e);if(t.length<4)throw new Error("missing checksum");let r=t.slice(0,-4);if(!Ue(r).every(((e,s)=>e==t[r.length+s])))throw new Error("invalid checksum");return r}str(e){return M.str_from_bytes([...e,...Ue(Uint8Array.from(e))])}};function Ie(e){let t;if("string"==typeof e?t=parseInt(e):"number"==typeof e&&(t=e),!Number.isSafeInteger(t))throw new TypeError(`Invalid chain: ${e}`);return`0x${t.toString(16)}`}class Se{constructor(e){this._id=e,this.data=void 0}get id(){return this._id}get name(){return this.data?.name??`Chain(${this.id})`}explorer_address_uri(e){return this.data?.explore_address.replace("{}",e)}explorer_tx_uri(e){return this.data?.explore_tx.replace("{}",e)}toJSON(){return this.id}toString(){return`Chain(${this.id})`}}const Pe={};function qe(e,t=!1){if(e instanceof Se)return e;let r=Ie(e),s=Pe[r];if(!s&&t)throw new Error(`Unknown chain: ${r}`);return s}function Ne(){return Object.values(Pe)}function Re(e){if(e instanceof Se)return e;let t=Ie(e),r=Pe[t];return r||(r=Pe[t]=new Se(t)),r}function Oe(e){return{explore_base:e,explore_address:`${e}/address/{}`,explore_tx:`${e}/tx/{}`}}function je(e){return-32e3===e.code&&"header not found"===e.message}Re(1).data={name:"Mainnet",...Oe("https://etherscan.io")},Re(3).data={name:"Ropsten",...Oe("https://ropsten.etherscan.io"),testnet:!0},Re(4).data={name:"Rinkeby",...Oe("https://rinkeby.etherscan.io"),testnet:!0},Re(5).data={name:"Goerli",...Oe("https://goerli.etherscan.io"),testnet:!0},Re(43).data={name:"Kovan",...Oe("https://kovan.etherscan.io"),testnet:!0},Re(137).data={name:"Matic",...Oe("https://polygonscan.com")},Re(43114).data={name:"Avax C-chain",...Oe("https://snowtrace.io")};async function ze(e,t){let r=3;for(;;)try{return await e(t)}catch(e){if(!(je(e)&&r-- >0))throw e;await new Promise((e=>setTimeout(e,500)))}}async function Le({smart:e=!0,timeout:t=3e3}={}){return new Promise(((r,s)=>{let i,n;const o="ethereum#initialized";function a(){let t=globalThis.ethereum;if(t)return r(e?Me(t):t),!0}a()||(i=setTimeout((()=>{globalThis?.removeEventListener(o,n),a()||s(new Error("No window.ethereum"))}),0|t),n=()=>{clearTimeout(i),globalThis?.removeEventListener(o,n),a()||s(new Error("jebaited"))},globalThis?.addEventListener(o,n))}))}function Me(e){if(e.isSmartProvider)return e;if("function"!=typeof e.request)throw new TypeError("expected provider");const t=e.isMetaMask?"MetaMask":"Unknown Provider";let r;async function s(t){return"eth_chainId"===t.method&&r?r:ze(e.request.bind(e),t)}async function i(e,...t){return s({method:e,params:t})}return e.on("connect",(({chainId:e})=>{r=e})),e.on("chainChanged",(e=>{r=e})),e.on("disconnect",(()=>{r=void 0})),new Proxy(e,{get:function(e,n){switch(n){case"req":return i;case"request":return s;case"chain_id":return r;case"source":return t;case"isSmartProvider":return!0;case"disconnect":return e[n]??(()=>{});default:return e[n]}}})}class Be{constructor(){this.queue=[]}add_static(e,t){let r=Re(e);return t=Me(t),this.queue.some((e=>e.provider===t))||this.queue.push({chain:r,provider:t}),this}add_dynamic(e){return e=Me(e),this.queue.some((t=>t.provider===e))||this.queue.unshift({provider:e}),this}available_providers(){return this.queue.map((({chain:e,provider:t})=>{if(null==e&&(e=qe(t.chain_id)),e)return[e,t]})).filter((e=>e))}disconnect(){for(let{provider:e}of this.queue)e.disconnect?.()}async find_provider(e,t){let r=qe(e,t);if(r)for(let{provider:e,chain:t}of this.queue)if(void 0===t&&(t=qe(await e.request({method:"eth_chainId"}))),r===t)return e;if(t)throw new Error(`No provider for chain ${r}`)}view(e){let t=Re(e),r=async e=>this.find_provider(t,e);return new Proxy(this,{get:(e,s)=>{switch(s){case"isProviderView":return!0;case"chain":return t;case"get_provider":return r;default:return e[s]}}})}}class Ye extends class{constructor(){this.__events={}}emit(e,...t){let r=this.__events[e];if(!r)return!1;for(let e of r)e(...t);return!0}on(e,t){let r=this.__events[e];return r||(this.__events[e]=r=[]),r.push(t),this}removeListener(e,t){let r=this.__events[e];if(r){let s=r.indexOf(t);s>=0&&(r.splice(s,1),0==r.length&&delete this.__events[e])}return this}}{get isSmartProvider(){return!0}async req(e,...t){return this.request({method:e,params:[...t]})}}class De extends Ye{constructor({url:e,WebSocket:t,source:r,request_timeout:s=3e4,idle_timeout:i=6e4}){if("string"!=typeof e)throw new TypeError("expected url");if(t||(t=globalThis.WebSocket),!t)throw new Error("unknown WebSocket implementation");super(),this.url=e,this._ws_api=t,this._request_timeout=s,this._idle_timeout=i,this._stay_connected=!1,this._reconnect_timer=void 0,this._idle_timer=void 0,this._ws=void 0,this._terminate=void 0,this._reqs=void 0,this._subs=new Set,this._id=void 0,this._chain_id=void 0,this._source=r}get source(){return this._source??this.url}get idle_timeout(){return this._idle_timeout}set idle_timeout(e){this.idle_timeout=0|e,this._restart_idle()}connect(){this._stay_connected||(this._stay_connected=!0,this._schedule_connect())}disconnect(){this._stay_connected=!1,this._terminate?.(new Error("Forced disconnect"))}_schedule_connect(){if(!this._stay_connected||this._ws)return;let e=this._last_connect,t=0;void 0!==e&&(t=Math.max(0,5e3-(Date.now()-e))),this._reconnect_timer=setTimeout((()=>this.ensure_connected().catch((()=>{}))),t)}_restart_idle(){if(clearTimeout(this._idle_timer),this._idle_timeout>0&&0==this._subs.size&&0==Object.keys(this._reqs).length){const{_terminate:e}=this;this._idle_timer=setTimeout((()=>{e(new Error("Idle timeout"))}),this._idle_timeout)}}async request(e){if("object"!=typeof e)throw new TypeError("expected object");let{method:t,params:r}=e;if("string"!=typeof t)throw new Error("expected method");if(r&&!Array.isArray(r))throw new Error("expected params array");switch(await this.ensure_connected(),t){case"eth_chainId":return this._chain_id;case"eth_subscribe":return this._request(e).then((e=>(this._subs.add(e),clearTimeout(this._idle_timer),e)));case"eth_unsubscribe":return this._request(e).then((e=>(this._subs.delete(r[0]),this._restart_idle(),e)));default:return this._request(e)}}_request(e){const t=++this._id,{_reqs:r,_ws:s,_request_timeout:i}=this;return clearTimeout(this._idle_timer),new Promise(((n,o)=>{let a=i>0?setTimeout((()=>{delete r[t],this._restart_idle(),o(new Error("Timeout"))}),i):void 0;r[t]={timer:a,ful:n,rej:o},s.send(JSON.stringify({jsonrpc:"2.0",id:t,...e}))}))}async ensure_connected(){let{_ws:e}=this;if(Array.isArray(e))return new Promise(((t,r)=>{e.push({ful:t,rej:r})}));if(e)return;clearTimeout(this._reconnect_timer),this._last_connect=Date.now();const t=this._ws=[],r=new this._ws_api(this.url);try{await new Promise(((e,t)=>{this._terminate=t;let s=setTimeout((()=>t(new Error("Timeout"))),this._request_timeout);r.addEventListener("close",t),r.addEventListener("error",t),r.addEventListener("open",(()=>{r.removeEventListener("error",t),r.removeEventListener("close",t),clearTimeout(s),e()}))}))}catch(e){r.close(),this._ws=void 0,this._terminate=void 0;for(let{rej:r}of t)r(e);throw this.emit("connect-error",e),this._schedule_connect(),e}this._ws=r,this._id=0;let s,i=this._reqs={},n=this._terminate=e=>{r.removeEventListener("close",s),r.removeEventListener("error",n),r.close(),this._ws=void 0,this._terminate=void 0,this._reqs=void 0,this._id=void 0,this._chain_id=void 0,this._subs.clear(),clearTimeout(this._idle_timer);for(let{rej:t}of Object.values(i))t(e);this.emit("disconnect",e),this._schedule_connect()};s=()=>n(new Error("Unexpected close")),r.addEventListener("close",s),r.addEventListener("error",n),r.addEventListener("message",(({data:e})=>{let t=JSON.parse(e),{id:r}=t;if(void 0===r){let{method:e,params:{subscription:r,result:s}}=t;this.emit("message",{type:e,data:{subscription:r,result:s}})}else{let e=i[r];if(!e)return;delete i[t.id],clearTimeout(e.timer),this._restart_idle();let{result:s,error:n}=t;if(void 0!==s)return e.ful(s);let o=new Error(n.message);o.code=n.code,e.rej(o)}})),this._chain_id=await this._request({method:"eth_chainId"}),this.emit("connect",{chainId:this._chain_id});for(let{ful:e}of t)e()}}class Ve extends Ye{constructor({url:e,fetch:t,source:r,request_timeout:s=3e4,idle_timeout:i=6e4}){if("string"!=typeof e)throw new TypeError("expected url");if(!t){let e=globalThis.fetch;if(!e)throw new TypeError("unable to find fetch()");t=e.bind(globalThis)}super(),this.url=e,this._fetch_api=t,this._id=0,this._chain_id=void 0,this._request_timeout=0|s,this._idle_timeout=0|i,this._idle_timer=void 0,this._source=r}get source(){return this._source??this.url}async request(e){if("object"!=typeof e)throw new TypeError("expected object");let t=this._request_once.bind(this);if(!this._idle_timer){try{this._chain_id=await ze(t,{method:"eth_chainId"})}catch(e){throw this.emit("connect-error",e),e}this.emit("connect",{chainId:this._chain_id}),this._restart_idle()}switch(e.method){case"eth_chainId":return this._chain_id;case"eth_subscribe":case"eth_unsubscribe":throw new Error(`${e.method} not supported by FetchProvider`)}try{let r=await ze(t,e);return this._restart_idle(),r}catch(e){throw this._terminate(e),e}}_restart_idle(){clearTimeout(this._idle_timer),this._idle_timer=!(this._idle_timeout>0)||setTimeout((()=>{this._terminate(new Error("Idle timeout"))}),this._idle_timeout)}disconnect(){this._idle_timer&&this._terminate(new Error("Forced disconnect"))}_terminate(e){this.emit("disconnect",e),clearTimeout(this._idle_timer),this._idle_timer=void 0,this._chain_id=void 0}_fetch(e,...t){return this._fetch_api(this.url,{method:"POST",body:JSON.stringify({...e,jsonrpc:"2.0",id:++this._id}),cache:"no-store",...t})}async _request_once(e){let t,r;if(this._request_timeout>0){let r=new AbortController,s=setTimeout((()=>r.abort()),this._request_timeout);try{t=await this._fetch(e,{signal:r.signal})}finally{clearTimeout(s)}}else t=await this._fetch(e);if(200!==t.status)throw new Error(`Fetch failed: ${t.status}`);try{r=await t.json()}catch(e){throw new Error("Invalid provider response: expected json",{cause:e})}let{error:s}=r;if(!s)return r.result;let i=new Error(s.message??"unknown error");throw i.code=s.code,i}}async function Fe(e,t,r=null,s="latest"){if("object"!=typeof e)throw new TypeError("expected provider");"string"==typeof t&&(t={to:t}),r instanceof P&&(t.data=r.build_hex());try{let r=await e.request({method:"eth_call",params:[t,s]});return U.from_hex(r)}catch(e){throw-32e3==e.code&&"execution reverted"===e.message&&(e.reverted=!0),e}}async function We(e,t){try{return await e.request({method:"eth_getCode",params:[t,"latest"]}),!0}catch(e){return console.log(e),!1}}async function Je(e,t,r){return Fe(e,t,P.method("supportsInterface(bytes4)").method(r)).then((e=>e.boolean())).catch((e=>{if(-32e3===e.code)return!1;throw e}))}const Ge={},Xe={};function He(e){if(!(e instanceof et))throw new TypeError("expected ENSAddr");let{type:t,name:r}=e,s=Ge[t]??Xe[r];if(s)throw new TypeError(`${s} already defined`);Ge[t]=Xe[r]=e}function Ke(e){return e instanceof et?e:"string"==typeof e?Xe[e]:Ze(e)?Ge[e]:void 0}function Qe(e){let t=Ke(e);return t?t.type:Ze(e)?e:void 0}function Ze(e){return Number.isSafeInteger(e)}class et{constructor(e,t){if(!Ze(e))throw new TypeError("type must be integer");if("string"!=typeof t)throw new TypeError("name must be string");this.type=e,this.name=t}str_from_bytes(e){if(!(e instanceof Uint8Array))throw new TypeError("expected bytes");let t=this.str(e);if("string"!=typeof t)throw new Error("invalid format");return t}bytes_from_str(e){if("string"!=typeof e)throw new TypeError("expected string");let t=this.bytes(e);if(!(t instanceof Uint8Array))throw new Error("unknown format");return t}toString(){return this.name}str(){throw new TypeError("missing implementation")}bytes(){throw new TypeError("missing implementation")}}class tt extends et{constructor(e,t,...r){super(e,t),this.coders=r}bytes(e){for(let t of this.coders){let r=t.bytes(e);if(r)return r}}str(e){for(let t of this.coders){let r=t.str(e);if(r)return r}}}function rt(t){return new T(e().update(t).bytes)}function st(e){return e.split(".")}function it(t){if("string"!=typeof t)throw new TypeError("expected string");let r=new Uint8Array(64);if(t.length>0)for(let s of st(t).reverse())r.set(rt(s).bytes,32),r.set(e().update(r).bytes,0);return new T(r.slice(0,32))}class nt{constructor({provider:e,providers:t,ens_normalize:r,registry:s="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"}){if(!e)throw new Error("expected provider");if(this.provider=e,e.isProviderView)this.providers=e;else if(t){if(!(t instanceof Be))throw new Error("invalid providers");this.providers=t}else{let t=new Be;t.add_dynamic(e),this.providers=t}this.ens_normalize=r,this.registry=s,this.normalizer=void 0,this._dot_eth=void 0,this._resolvers={}}normalize(e){return this.ens_normalize?.(e)??e}labelhash(e){if("string"==typeof e)return rt(this.normalize(e));if(e instanceof T)return e;throw new TypeError("expected string or Uint256")}owner(e){try{return new at(this,m(e))}catch(t){let r=new Error(`Invalid address ${e}: ${t.message}`,{cause:t});throw r.isInvalid=!0,r.address=e,r}}async get_provider(){let e=this.provider;return e.isProviderView?e.get_provider():e}async call_registry(...e){return Fe(await this.get_provider(),this.registry,...e)}async get_resolver(e){return this.call_registry(P.method("resolver(bytes32)").number(e)).then((e=>e.addr())).then((e=>{if(_(e))return;let t=this._resolvers[e];return t||(t=this._resolvers[e]=new ot(this,e)),t}))}async resolve(e){let t;try{t=this.normalize(e)}catch(t){let r=new Error(`Name is invalid: ${t.message}`,{cause:t});throw r.isInvalid=!0,r.name=e,r}let r,s=it(t);try{r=await this.get_resolver(s)}catch(r){let i=new Error(`Unable to determine resolver: ${r.message}`,{cause:r});throw i.input=e,i.name=t,i.node=s,i}return new ht(this,e,t,s,r)}async primary_from_address(e){try{e=m(e,!1)}catch(t){let r=new TypeError(`Invalid address ${e}: ${t.message}`,{cause:t});throw r.input=e,r}let t=it(`${e.slice(2).toLowerCase()}.addr.reverse`),r=await this.get_resolver(t);if(r)try{return(await Fe(await this.get_provider(),r.address,P.method("name(bytes32)").number(t))).string()}catch(e){throw new Error(`Read primary failed: ${e.message}`,{cause:e})}}async get_dot_eth(){return void 0!==this._dot_eth?this._dot_eth:f(this,"_dot_eth",this.resolve("eth").then((e=>new dt(e))))}}class ot{constructor(e,t){this.ens=e,this.address=t,this._interfaces=void 0}async supports_interface(e){let t=I(e);this._interfaces||(this._interfaces={});let r=this._interfaces[t];return void 0!==r?r:f(this._interfaces,t,this.ens.get_provider().then((e=>Je(e,this.address,t))))}toJSON(){return this.address}}class at{constructor(e,t){this.ens=e,this.address=t,this._primary=void 0}toJSON(){return this.address}async get_primary_name(){return void 0!==this._primary?this._primary:f(this,"_primary",this.ens.primary_from_address(this.address))}async resolve(){let e=await this.get_primary_name();if(null===e)throw new Error(`No name for address: ${address}`);if(!e)throw new Error(`Primary not set for address: ${address}`);return this.ens.resolve(e)}}class ht{constructor(e,t,r,s,i){this.ens=e,this.input=t,this.name=r,this.node=s,this.resolver=i,this.resolved=new Date,this._owner=void 0,this._address=void 0,this._display=void 0,this._avatar=void 0,this._pubkey=void 0,this._content=void 0,this._text={},this._addr={}}get labels(){return st(this)}toJSON(){return this.name}assert_valid_resolver(){if(!this.resolver)throw new Error("No resolver")}async call_resolver(...e){return this.assert_valid_resolver(),Fe(await this.ens.get_provider(),this.resolver.address,...e)}async get_address(){return void 0!==this._address?this._address:(this.assert_valid_resolver(),f(this,"_address",(async()=>{const e="addr(bytes32)";let t;if(await this.resolver.supports_interface("addr(bytes32,uint256)"))t=this.get_addr_bytes(60);else{if(!await this.resolver.supports_interface(e))throw new Error("Resolver does not support addr");t=this.call_resolver(P.method(e).number(this.node)).then((e=>e.read_addr_bytes()))}let r=await t;if(0==r.length)return y;if(20!=r.length)throw new Error("Invalid ETH Address: expected 20 bytes");return m(s(r))})()))}async get_owner(){return void 0!==this._owner?this._owner:f(this,"_owner",this.ens.call_registry(P.method("owner(bytes32)").number(this.node)).then((e=>new at(this.ens,e.addr()))).catch((e=>{throw new Error(`Read owner failed: ${e.message}`,{cause:e})})))}async get_owner_address(){return(await this.get_owner()).address}async get_owner_primary_name(){return(await this.get_owner()).get_primary_name()}async is_owner_primary_name(){return this.is_equivalent_name(await this.get_owner_primary_name())}is_input_normalized(){return this.input===this.name}is_equivalent_name(e){try{return this.assert_equivalent_name(e),!0}catch(e){return!1}}assert_equivalent_name(e){if(e===this.name)return;if(!e)throw new Error("Name is empty");let t;try{t=this.ens.normalize(e)}catch(t){throw new Error(`Name "${e}" is invalid: ${t.message}`,{cause:t})}if(t!==this.name)throw new Error(`${e} does not match ${this.name}`)}async is_input_display(){let e;return this.resolver&&(e=await this.get_text("display")),e?this.input===e&&this.is_equivalent_name(e):this.input===this.name}async get_display_name(){return void 0!==this._display?this._display:f(this,"_display",this.get_text("display").then((e=>this.is_equivalent_name(e)?e:this.name)))}async get_avatar(){return void 0!==this._avatar?this._avatar:f(this,"_avatar",lt(await this.get_text("avatar"),this.ens.providers,await this.get_address()))}async get_text(e){if("string"!=typeof e)throw new TypeError("expected string");let t=this._text[e];return void 0!==t?t:(this.assert_valid_resolver(),f(this._text,e,(async()=>{const t="text(bytes32,string)";if(!await this.resolver.supports_interface(t))throw new Error("Resolver does not support text");try{return(await this.call_resolver(P.method(t).number(this.node).string(e))).string()}catch(t){throw new Error(`Error reading text ${e}: ${t.message}`,{cause:t})}})()))}async get_texts(e){if(void 0===e)e=Object.keys(this._text);else if(!Array.isArray(e))throw new TypeError("expected array");let t=await Promise.all(e.map((e=>this.get_text(e))));return Object.fromEntries(e.map(((e,r)=>[e,t[r]])))}async get_addr(e){let t=Ke(e);if(!t)throw new Error(`Unknown address type: ${e}`);return t.str_from_bytes(await this.get_addr_bytes(t.type))}async get_addr_bytes(e){let t=Qe(e);if(void 0===t)throw new Error(`Unknown address type: ${e}`);let r=this._addr[t];return void 0!==r?r:(this.assert_valid_resolver(),f(this._addr,t,(async()=>{const e="addr(bytes32,uint256)";if(!await this.resolver.supports_interface(e))throw new Error("Resolver does not support addr");try{return(await this.call_resolver(P.method(e).number(this.node).number(t))).memory()}catch(e){throw new Error(`Error reading addr type ${t}: ${e.message}`,{cause:e})}})()))}async get_addrs(e){if(void 0===e)e=Object.keys(this._addr).map((e=>parseInt(e)));else{if(!Array.isArray(e))throw new TypeError("expected array");e=e.map(Qe).filter((e=>void 0!==e))}e=[...new Set(e)];let t=await Promise.all(e.map((e=>this.get_addr_bytes(e))));return e.map(((e,r)=>{let s=t[r],i=Ke(e),n={type:e,bytes:s};if(i&&(n.name=i.name,s.length>0))try{n.addr=i.str_from_bytes(s)}catch(e){n.error=e}return n}))}async get_pubkey(){return void 0!==this._pubkey?this._pubkey:(this.assert_valid_resolver(),f(this,"_pubkey",(async()=>{try{let e=await this.call_resolver(P.method("pubkey(bytes32)").number(this.node));return{x:e.uint256(),y:e.uint256()}}catch(e){throw new Error(`Error reading pubkey: ${e.message}`,{cause:e})}})()))}async get_content(){return void 0!==this._content?this._content:(this.assert_valid_resolver(),f(this,"_content",(async()=>{let e;try{e=(await this.call_resolver(P.method("contenthash(bytes32)").number(this.node))).memory()}catch(e){throw new Error(`Error reading content: ${e.message}`,{cause:e})}if(0==e.length)return{};let t=ct(e);return t.hash=e,t})()))}}function ct(e){let t;switch([t,e]=ne(e),t){case 227:{let r={type:"ipfs",protocol:t};try{let t=he.from_bytes(e);r.cid=t,r.url=`ipfs://${t.toString()}`}catch(e){r.error=e}return r}case 229:{let r={type:"ipns",protocol:t};try{let t=he.from_bytes(e);if(1!==t.version)throw new Error("invalid CID version");if(0!==t.hash.code)throw new Error("expected identity hash");r.cid=t,r.url=`ipns://${t}`}catch(e){r.error=e}return r}default:return{type:"unknown",protocol:t}}}async function lt(e,t,r){if("string"!=typeof e)throw new Error("Invalid avatar: expected string");if(0==e.length)return{type:"null"};if(e.includes("://")||e.startsWith("data:"))return{type:"url",url:e};let s=e.split("/"),i=s[0];if(i.startsWith("eip155:")){if(s.length<2)return{type:"invalid",error:"expected contract"};if(s.length<3)return{type:"invalid",error:"expected token"};let e;try{e=Ie(i.slice(i.indexOf(":")+1))}catch(e){return{type:"invalid",error:e.message}}let n=s[1];if(n.startsWith("erc721:")){let i,o=n.slice(n.indexOf(":")+1);try{o=m(o)}catch(e){return{type:"invalid",error:`Invalid contract address: ${e.message}`}}try{i=T.from_str(s[2])}catch(e){return{type:"invalid",error:`Invalid token: ${e.message}`}}let a={type:"nft",interface:"erc721",contract:o,token:i,chain_id:e};if(t instanceof Be&&(t=await(t?.find_provider(e))),t)try{let[e,s]=await Promise.all([Fe(t,o,P.method("ownerOf(uint256)").number(i)).then((e=>e.addr())),Fe(t,o,P.method("tokenURI(uint256)").number(i)).then((e=>e.string()))]);a.owner=e,a.meta_uri=s,"string"==typeof r&&(a.owned=r.toUpperCase()===e.toUpperCase()?1:0)}catch(e){return{type:"invalid",error:"invalid response from contract"}}return a}if(n.startsWith("erc1155:")){let i,o=n.slice(n.indexOf(":")+1);try{o=m(o)}catch(e){return{type:"invalid",error:`Invalid contract address: ${e.message}`}}try{i=T.from_str(s[2])}catch(e){return{type:"invalid",error:`Invalid token: ${e.message}`}}let a={type:"nft",interface:"erc1155",contract:o,token:i,chain_id:e};if(t instanceof Be&&(t=await(t?.find_provider(e))),t)try{let[e,s]=await Promise.all([g(r)?Fe(t,o,P.method("balanceOf(address,uint256)").addr(r).number(i)).then((e=>e.number())):-1,Fe(t,o,P.method("uri(uint256)").number(i)).then((e=>e.string()))]);a.meta_uri=s.replace("{id}",i.hex.slice(2)),e>=0&&(a.owned=e)}catch(e){return{type:"invalid",error:"invalid response from contract"}}return a}return{type:"invalid",error:`unsupported contract interface: ${n}`}}return{type:"unknown"}}function ut(e,t=!1){let r=Object.values(ADDR_TYPES).indexOf(e);if(r>=0){let s=Object.keys(ADDR_TYPES)[r];return t&&(s=`${s}<${e}>`),s}return"0x"+x.toString(16).padStart(4,"0")}class dt{constructor(e){this.name=e,this._impls=void 0}async address_for_interface(e){const t="interfaceImplementer(bytes32,bytes4)";let r=I(e);if(this._impls){let e=this._impls[r];if(void 0!==e)return e}else if(!await this.name.resolver.supports_interface(t))throw new Error(`${this.name.name} resolver does not implement ${t}`);return this._impls={},f(this._impls,r,this.name.ens.get_provider().then((e=>Fe(e,this.name.resolver.address,P.method(t).number(this.name.node).method(r)))).then((e=>e.addr())))}async get_address(){return this.name.get_owner_address()}async get_controller_address(){return this.address_for_interface("0x018fac06")}async is_available(e){return(await Fe(await this.name.ens.get_provider(),await this.get_address(),P.method("available(uint256)").number(this.name.ens.labelhash(e)))).boolean()}async get_owner(e){try{return this.name.ens.owner((await Fe(await this.name.ens.get_provider(),await this.get_address(),P.method("ownerOf(uint256)").number(this.name.ens.labelhash(e)))).addr())}catch(e){if(e.reverted)return;throw e}}async get_rent_price(e,t=31536e3){return(await Fe(await this.name.ens.get_provider(),await this.get_controller_address(),P.method("rentPrice(string,uint256)").string(this.name.ens.normalize(e)).number(t))).uint256()}}class ft extends q{constructor(e,t){super(),this.p2pkh=e,this.p2sh=t}str(e){let t=e.length;return t>=4&&118==e[0]&&169==e[1]&&e[2]==t-5&&136==e[t-2]&&172==e[t-1]?Ce.str_from_bytes([...this.p2pkh[0],...e.slice(3,-2)]):t>=3&&169==e[0]&&e[1]==t-2&&118==e[t-1]?Ce.str_from_bytes([...this.p2sh[0],...e.slice(2)]):void 0}bytes(e){let t=Ce.bytes_from_str(e),r=20;for(let e of this.p2pkh)if(t.length-e.length==r&&0==d(e,t.slice(0,e.length)))return Uint8Array.from([118,169,r,...t.slice(-r),136,172]);for(let e of this.p2sh)if(t.length-e.length==r&&0==d(e,t.slice(0,e.length)))return Uint8Array.from([169,r,...t.slice(-r),118])}}const wt=new class extends q{str(e){return m(s(e))}bytes(e){return bytes_from_hex(m(e))}};He(new tt(0,"BTC",new ft([[0]],[[5]]),new ye("bc"))),He(new tt(2,"LTC",new ft([[48]],[[50],[5]]),new ye("ltc"))),He(new tt(3,"DOGE",new ft([[30]],[[22]]))),He(new tt(4,"RDD",new ft([[61]],[[5]]))),He(new tt(5,"DASH",new ft([[76]],[[16]]))),He(new tt(6,"PPC",new ft([[55]],[[117]]))),He(new tt(7,"NMC",Ce)),He(new tt(14,"VIA",new ft([[71]],[[33]]))),He(new tt(20,"DGB",new ft([[30]],[[63]]),new ye("dgb"))),He(new tt(22,"MONA",new ft([[50]],[[55],[5]]),new ye("mona"))),He(new tt(42,"DCR",M)),He(new tt(43,"XEM",new N(J,(e=>e.toUpperCase())))),He(new tt(55,"AIB",new ft([[23]],[[5]]))),He(new tt(57,"SYS",new ft([[63]],[[5]]),new ye("sys"))),He(new tt(56,"BSC",wt)),He(new tt(60,"ETH",wt)),He(new tt(61,"ETC",wt)),He(new tt(77,"XVG",new ft([[30]],[[33]]))),He(new tt(105,"STRAT",new ft([[63]],[[125]]))),He(new tt(111,"ARK",new R(Ce,(e=>{if(23!=e[0])throw new Error("invalid prefix");return e})))),He(new tt(118,"ATOM",new _e(pe.TYPE_1,"cosmos"))),He(new tt(119,"ZIL",new _e(pe.TYPE_1,"zil"))),He(new tt(120,"EGLD",new _e(pe.TYPE_1,"erd"))),He(new tt(121,"ZEN",new N(Ce,(e=>{if(!/^(zn|t1|zs|t3|zc)/.test(e))throw new Error("invalid prefix");return e})))),He(new tt(133,"ZEC",new ft([[28,184]],[[28,189]])),new ye("zs")),He(new tt(136,"FIRO",new ft([[82]],[[7]]))),He(new tt(137,"MATIC",wt)),He(new tt(141,"KMD",new ft([[60]],[[85]]))),He(new tt(153,"BTM",new ye("bm"))),He(new tt(156,"BTG",new ft([[38]],[[23]]),new ye("btg"))),He(new tt(175,"RVN",new ft([[60]],[[122]]))),He(new tt(178,"POA",wt)),He(new tt(192,"LCC",new ft([[28]],[[50],[5]]),new ye("lcc"))),He(new tt(195,"TRX",Ce)),He(new tt(239,"NEO",Ce)),He(new tt(246,"EWT",wt)),He(new tt(291,"IOST",M)),He(new tt(301,"DIVI",new ft([[30]],[[13]]))),He(new tt(304,"IOTX",new _e(pe.TYPE_1,"io"))),He(new tt(309,"CKB",new _e(pe.TYPE_1,"ckb"))),He(new tt(330,"LUNA",new _e(pe.TYPE_1,"terra"))),He(new tt(459,"KAVA",new _e(pe.TYPE_1,"kava"))),He(new tt(489,"CCA",new ft([[11]],[[5]]))),He(new tt(500,"THETA",wt)),He(new tt(501,"SOL",M)),He(new tt(566,"IRIS",new _e(pe.TYPE_1,"griiaan"))),He(new tt(568,"LRG",new ft([[30]],[[13]]))),He(new tt(571,"CCXX",new ft([[137]],[[75],[5]]),new ye("ccx"))),He(new tt(573,"SRM",M)),He(new tt(574,"VLX",M)),He(new tt(576,"BPS",new ft([[0]],[[5]]))),He(new tt(589,"TFUEL",wt)),He(new tt(592,"GRIN",new _e(pe.TYPE_1,"grin"))),He(new tt(614,"OPT",wt)),He(new tt(700,"XDAI",wt)),He(new tt(703,"VET",wt)),He(new tt(714,"BNB",new _e(pe.TYPE_1,"bnb"))),He(new tt(820,"CLO",wt)),He(new tt(889,"TOMO",wt)),He(new tt(904,"HNT",new R(Ce,((e,t)=>{if(t)return Uint8Array.of(0,...e);if(0!=e[0])throw new Error("invalid prefix");return e.slice(1)})))),He(new tt(931,"RUNE",new _e(pe.TYPE_1,"thor"))),He(new tt(999,"BCD",new ft([[0]],[[5]]),new ye("bcd"))),He(new tt(1001,"TT",wt)),He(new tt(1007,"FTM",wt)),He(new tt(1023,"ONE",new _e(pe.TYPE_1,"one"))),He(new tt(2301,"QTUM",Ce)),He(new tt(2305,"ELA",M)),He(new tt(4218,"IOTA",new R(new _e(pe.TYPE_1,"iota"),((e,t)=>t?e.slice(1):Uint8Array.of(0,...e))))),He(new tt(6060,"GO",wt)),He(new tt(8444,"XCH",new _e(pe.TYPE_M,"xch"))),He(new tt(9e3,"AVAX",new _e(pe.TYPE_1,"avax"))),He(new tt(9797,"NRG",wt)),He(new tt(42161,"ARB1",wt)),He(new tt(52752,"CELO",wt)),He(new tt(99999,"WICC",new ft([[73]],[[51]])));class _t{constructor(e,t,{strict:r=!0,cache:s=!0}={}){this.provider=e,this.address=m(t),this.strict=r,this._type=void 0,this._name=void 0,this._supply=void 0,s&&(this.token_uris={})}async call(...e){return Fe(await this.get_provider(),this.address,...e)}async supports(e){return Je(await this.get_provider(),this.address,e)}async get_provider(){let e=this.provider;return e.isProviderView?e.get_provider():e}async get_type(){return void 0!==this._type?this._type:"0xb47e3cd837dDF8e4c57F05d70Ab865de6e193BBB"===this.address?this._type="CryptoPunks":f(this,"_type",(async()=>await this.supports("d9b67a26")?"ERC-1155":!this.strict||await this.supports("80ac58cd")||await this.supports("d31b620d")?"ERC-721":"Unknown")())}async _uri_from_token(e){switch(await this.get_type()){case"CryptoPunks":{let{dec:t}=e;return w({name:`CryptoPunk #${t}`,image:`https://www.larvalabs.com/public/images/cryptopunks/punk${t}.png`,external_url:`https://www.larvalabs.com/cryptopunks/details/${t}`})}case"ERC-721":return this.call(P.method("tokenURI(uint256)").number(e)).then((e=>e.string())).then((e=>pt(e.trim())));case"ERC-1155":return this.call(P.method("uri(uint256)").number(e)).then((e=>e.string())).then((t=>pt(t.replace("{id}",e.hex.slice(2)).trim())));default:throw new Error(`unable to query ${e} from ${this.address}`)}}async get_token_uri(e){let t=T.wrap(e),r=this.token_uris;if(!r)return this._uri_from_token(t);let s=t.hex,i=r[s];return void 0!==i?i:f(r,s,this._uri_from_token(t))}async get_name(){return void 0!==this._name?this._name:f(this,"_name",(async()=>{switch(await this.get_type()){case"CryptoPunks":case"ERC-721":try{return(await this.call(P.method("name()"))).string()}catch(e){throw new Error(`Error reading name: ${e.message}`,{cause:e})}default:return""}})())}async get_supply(){return void 0!==this._supply&&this._supply,f(this,"_supply",(async()=>{switch(await this.get_type()){case"CryptoPunks":case"ERC-721":try{return(await this.call(P.method("totalSupply()"))).number()}catch(e){if(err.reverted)return NaN;throw new Error(`Error reading supply: ${e.message}`,{cause:e})}default:return NaN}})())}}function pt(e){try{return ae.from_str(e),`ipfs://${e}`}catch(e){}let t;return(t=e.match(/^ipfs\:\/\/ipfs\/(.*)$/i))?`ipfs://${t[1]}`:e}export{U as ABIDecoder,P as ABIEncoder,X as Base10,G as Base16,K as Base2,J as Base32,W as Base32Hex,F as Base36,M as Base58BTC,Ce as Base58Check,D as Base64,V as Base64URL,H as Base8,pe as Bech32,_e as Bech32Coder,he as CID,ce as CIDv0,le as CIDv1,Se as Chain,nt as ENS,et as ENSAddr,tt as ENSAddrCoder,ht as ENSName,at as ENSOwner,ot as ENSResolver,Ve as FetchProvider,_t as NFT,y as NULL_ADDRESS,Be as Providers,me as Segwit,ye as SegwitCoder,T as Uint256,De as WebSocketProvider,se as assert_uvarint,S as bytes4_from_method,i as bytes_from_hex,n as bytes_from_utf8,Qe as coerce_ens_addr_type,d as compare_arrays,w as data_uri_from_json,ee as decode_multibase,He as define_ens_addr,Ne as defined_chains,Le as determine_window_provider,te as encode_multibase,Re as ensure_chain,Fe as eth_call,qe as find_chain,Ke as find_ens_addr,pt as fix_multihash_uri,ut as format_addr_type,s as hex_from_bytes,I as hex_from_method,b as is_checksum_address,We as is_contract,_ as is_null_hex,g as is_valid_address,e as keccak,rt as labelhash,st as labels_from_name,$ as left_truncate_bytes,Me as make_smart,it as namehash,lt as parse_avatar,ct as parse_content,f as promise_object_setter,ne as read_uvarint,p as replace_ipfs_protocol,k as set_bytes_to_number,ge as sha256,t as sha3,r as shake,v as short_address,ie as sizeof_uvarint,m as standardize_address,Ie as standardize_chain_id,Je as supports_interface,A as unsigned_from_bytes,o as utf8_from_bytes,oe as write_uvarint};
